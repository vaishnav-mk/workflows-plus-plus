var dl=Object.create;var $a=Object.defineProperty;var fl=Object.getOwnPropertyDescriptor;var hl=Object.getOwnPropertyNames;var pl=Object.getPrototypeOf,ml=Object.prototype.hasOwnProperty;var Q=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),vl=(a,e)=>{for(var t in e)$a(a,t,{get:e[t],enumerable:!0})},gl=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of hl(e))!ml.call(a,r)&&r!==t&&$a(a,r,{get:()=>e[r],enumerable:!(s=fl(e,r))||s.enumerable});return a};var yl=(a,e,t)=>(t=a!=null?dl(pl(a)):{},gl(e||!a||!a.__esModule?$a(t,"default",{value:a,enumerable:!0}):t,a));var ln=Q((Xt,on)=>{(function(a,e){typeof Xt=="object"&&typeof on<"u"?e(Xt):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(Xt,function(a){"use strict";function e(){for(var p=arguments.length,f=Array(p),v=0;v<p;v++)f[v]=arguments[v];if(f.length>1){f[0]=f[0].slice(0,-1);for(var P=f.length-1,x=1;x<P;++x)f[x]=f[x].slice(1,-1);return f[P]=f[P].slice(1),f.join("")}else return f[0]}function t(p){return"(?:"+p+")"}function s(p){return p===void 0?"undefined":p===null?"null":Object.prototype.toString.call(p).split(" ").pop().split("]").shift().toLowerCase()}function r(p){return p.toUpperCase()}function n(p){return p!=null?p instanceof Array?p:typeof p.length!="number"||p.split||p.setInterval||p.call?[p]:Array.prototype.slice.call(p):[]}function o(p,f){var v=p;if(f)for(var P in f)v[P]=f[P];return v}function i(p){var f="[A-Za-z]",v="[\\x0D]",P="[0-9]",x="[\\x22]",N=e(P,"[A-Fa-f]"),G="[\\x0A]",ae="[\\x20]",oe=t(t("%[EFef]"+N+"%"+N+N+"%"+N+N)+"|"+t("%[89A-Fa-f]"+N+"%"+N+N)+"|"+t("%"+N+N)),xe="[\\:\\/\\?\\#\\[\\]\\@]",te="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",me=e(xe,te),Ee=p?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",he=p?"[\\uE000-\\uF8FF]":"[]",ne=e(f,P,"[\\-\\.\\_\\~]",Ee),ve=t(f+e(f,P,"[\\+\\-\\.]")+"*"),ce=t(t(oe+"|"+e(ne,te,"[\\:]"))+"*"),Tr=t(t("25[0-5]")+"|"+t("2[0-4]"+P)+"|"+t("1"+P+P)+"|"+t("[1-9]"+P)+"|"+P),Me=t(t("25[0-5]")+"|"+t("2[0-4]"+P)+"|"+t("1"+P+P)+"|"+t("0?[1-9]"+P)+"|0?0?"+P),Ve=t(Me+"\\."+Me+"\\."+Me+"\\."+Me),ue=t(N+"{1,4}"),qe=t(t(ue+"\\:"+ue)+"|"+Ve),He=t(t(ue+"\\:")+"{6}"+qe),rr=t("\\:\\:"+t(ue+"\\:")+"{5}"+qe),$r=t(t(ue)+"?\\:\\:"+t(ue+"\\:")+"{4}"+qe),lr=t(t(t(ue+"\\:")+"{0,1}"+ue)+"?\\:\\:"+t(ue+"\\:")+"{3}"+qe),ft=t(t(t(ue+"\\:")+"{0,2}"+ue)+"?\\:\\:"+t(ue+"\\:")+"{2}"+qe),Tt=t(t(t(ue+"\\:")+"{0,3}"+ue)+"?\\:\\:"+ue+"\\:"+qe),$t=t(t(t(ue+"\\:")+"{0,4}"+ue)+"?\\:\\:"+qe),Kr=t(t(t(ue+"\\:")+"{0,5}"+ue)+"?\\:\\:"+ue),Gr=t(t(t(ue+"\\:")+"{0,6}"+ue)+"?\\:\\:"),cr=t([He,rr,$r,lr,ft,Tt,$t,Kr,Gr].join("|")),Wr=t(t(ne+"|"+oe)+"+"),wa=t(cr+"\\%25"+Wr),Or=t(cr+t("\\%25|\\%(?!"+N+"{2})")+Wr),sl=t("[vV]"+N+"+\\."+e(ne,te,"[\\:]")+"+"),nl=t("\\["+t(Or+"|"+cr+"|"+sl)+"\\]"),Ts=t(t(oe+"|"+e(ne,te))+"*"),ht=t(nl+"|"+Ve+"(?!"+Ts+")|"+Ts),pt=t(P+"*"),$s=t(t(ce+"@")+"?"+ht+t("\\:"+pt)+"?"),mt=t(oe+"|"+e(ne,te,"[\\:\\@]")),il=t(mt+"*"),Os=t(mt+"+"),ol=t(t(oe+"|"+e(ne,te,"[\\@]"))+"+"),ur=t(t("\\/"+il)+"*"),Xr=t("\\/"+t(Os+ur)+"?"),Ta=t(ol+ur),Ot=t(Os+ur),Yr="(?!"+mt+")",uf=t(ur+"|"+Xr+"|"+Ta+"|"+Ot+"|"+Yr),et=t(t(mt+"|"+e("[\\/\\?]",he))+"*"),vt=t(t(mt+"|[\\/\\?]")+"*"),As=t(t("\\/\\/"+$s+ur)+"|"+Xr+"|"+Ot+"|"+Yr),ll=t(ve+"\\:"+As+t("\\?"+et)+"?"+t("\\#"+vt)+"?"),cl=t(t("\\/\\/"+$s+ur)+"|"+Xr+"|"+Ta+"|"+Yr),ul=t(cl+t("\\?"+et)+"?"+t("\\#"+vt)+"?"),df=t(ll+"|"+ul),ff=t(ve+"\\:"+As+t("\\?"+et)+"?"),hf="^("+ve+")\\:"+t(t("\\/\\/("+t("("+ce+")@")+"?("+ht+")"+t("\\:("+pt+")")+"?)")+"?("+ur+"|"+Xr+"|"+Ot+"|"+Yr+")")+t("\\?("+et+")")+"?"+t("\\#("+vt+")")+"?$",pf="^(){0}"+t(t("\\/\\/("+t("("+ce+")@")+"?("+ht+")"+t("\\:("+pt+")")+"?)")+"?("+ur+"|"+Xr+"|"+Ta+"|"+Yr+")")+t("\\?("+et+")")+"?"+t("\\#("+vt+")")+"?$",mf="^("+ve+")\\:"+t(t("\\/\\/("+t("("+ce+")@")+"?("+ht+")"+t("\\:("+pt+")")+"?)")+"?("+ur+"|"+Xr+"|"+Ot+"|"+Yr+")")+t("\\?("+et+")")+"?$",vf="^"+t("\\#("+vt+")")+"?$",gf="^"+t("("+ce+")@")+"?("+ht+")"+t("\\:("+pt+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",f,P,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",ne,te),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",ne,te),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",ne,te),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",ne,te),"g"),NOT_QUERY:new RegExp(e("[^\\%]",ne,te,"[\\:\\@\\/\\?]",he),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",ne,te,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",ne,te),"g"),UNRESERVED:new RegExp(ne,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",ne,me),"g"),PCT_ENCODED:new RegExp(oe,"g"),IPV4ADDRESS:new RegExp("^("+Ve+")$"),IPV6ADDRESS:new RegExp("^\\[?("+cr+")"+t(t("\\%25|\\%(?!"+N+"{2})")+"("+Wr+")")+"?\\]?$")}}var c=i(!1),u=i(!0),h=function(){function p(f,v){var P=[],x=!0,N=!1,G=void 0;try{for(var ae=f[Symbol.iterator](),oe;!(x=(oe=ae.next()).done)&&(P.push(oe.value),!(v&&P.length===v));x=!0);}catch(xe){N=!0,G=xe}finally{try{!x&&ae.return&&ae.return()}finally{if(N)throw G}}return P}return function(f,v){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return p(f,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(p){if(Array.isArray(p)){for(var f=0,v=Array(p.length);f<p.length;f++)v[f]=p[f];return v}else return Array.from(p)},b=2147483647,d=36,y=1,_=26,g=38,E=700,O=72,S=128,w="-",A=/^xn--/,I=/[^\0-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=d-y,z=Math.floor,M=String.fromCharCode;function L(p){throw new RangeError(q[p])}function $(p,f){for(var v=[],P=p.length;P--;)v[P]=f(p[P]);return v}function D(p,f){var v=p.split("@"),P="";v.length>1&&(P=v[0]+"@",p=v[1]),p=p.replace(H,".");var x=p.split("."),N=$(x,f).join(".");return P+N}function F(p){for(var f=[],v=0,P=p.length;v<P;){var x=p.charCodeAt(v++);if(x>=55296&&x<=56319&&v<P){var N=p.charCodeAt(v++);(N&64512)==56320?f.push(((x&1023)<<10)+(N&1023)+65536):(f.push(x),v--)}else f.push(x)}return f}var le=function(f){return String.fromCodePoint.apply(String,m(f))},X=function(f){return f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:d},re=function(f,v){return f+22+75*(f<26)-((v!=0)<<5)},W=function(f,v,P){var x=0;for(f=P?z(f/E):f>>1,f+=z(f/v);f>k*_>>1;x+=d)f=z(f/k);return z(x+(k+1)*f/(f+g))},U=function(f){var v=[],P=f.length,x=0,N=S,G=O,ae=f.lastIndexOf(w);ae<0&&(ae=0);for(var oe=0;oe<ae;++oe)f.charCodeAt(oe)>=128&&L("not-basic"),v.push(f.charCodeAt(oe));for(var xe=ae>0?ae+1:0;xe<P;){for(var te=x,me=1,Ee=d;;Ee+=d){xe>=P&&L("invalid-input");var he=X(f.charCodeAt(xe++));(he>=d||he>z((b-x)/me))&&L("overflow"),x+=he*me;var ne=Ee<=G?y:Ee>=G+_?_:Ee-G;if(he<ne)break;var ve=d-ne;me>z(b/ve)&&L("overflow"),me*=ve}var ce=v.length+1;G=W(x-te,ce,te==0),z(x/ce)>b-N&&L("overflow"),N+=z(x/ce),x%=ce,v.splice(x++,0,N)}return String.fromCodePoint.apply(String,v)},ge=function(f){var v=[];f=F(f);var P=f.length,x=S,N=0,G=O,ae=!0,oe=!1,xe=void 0;try{for(var te=f[Symbol.iterator](),me;!(ae=(me=te.next()).done);ae=!0){var Ee=me.value;Ee<128&&v.push(M(Ee))}}catch(Or){oe=!0,xe=Or}finally{try{!ae&&te.return&&te.return()}finally{if(oe)throw xe}}var he=v.length,ne=he;for(he&&v.push(w);ne<P;){var ve=b,ce=!0,Tr=!1,Me=void 0;try{for(var Ve=f[Symbol.iterator](),ue;!(ce=(ue=Ve.next()).done);ce=!0){var qe=ue.value;qe>=x&&qe<ve&&(ve=qe)}}catch(Or){Tr=!0,Me=Or}finally{try{!ce&&Ve.return&&Ve.return()}finally{if(Tr)throw Me}}var He=ne+1;ve-x>z((b-N)/He)&&L("overflow"),N+=(ve-x)*He,x=ve;var rr=!0,$r=!1,lr=void 0;try{for(var ft=f[Symbol.iterator](),Tt;!(rr=(Tt=ft.next()).done);rr=!0){var $t=Tt.value;if($t<x&&++N>b&&L("overflow"),$t==x){for(var Kr=N,Gr=d;;Gr+=d){var cr=Gr<=G?y:Gr>=G+_?_:Gr-G;if(Kr<cr)break;var Wr=Kr-cr,wa=d-cr;v.push(M(re(cr+Wr%wa,0))),Kr=z(Wr/wa)}v.push(M(re(Kr,0))),G=W(N,He,ne==he),N=0,++ne}}}catch(Or){$r=!0,lr=Or}finally{try{!rr&&ft.return&&ft.return()}finally{if($r)throw lr}}++N,++x}return v.join("")},Te=function(f){return D(f,function(v){return A.test(v)?U(v.slice(4).toLowerCase()):v})},Ae=function(f){return D(f,function(v){return I.test(v)?"xn--"+ge(v):v})},se={version:"2.1.0",ucs2:{decode:F,encode:le},decode:U,encode:ge,toASCII:Ae,toUnicode:Te},be={};function Se(p){var f=p.charCodeAt(0),v=void 0;return f<16?v="%0"+f.toString(16).toUpperCase():f<128?v="%"+f.toString(16).toUpperCase():f<2048?v="%"+(f>>6|192).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase():v="%"+(f>>12|224).toString(16).toUpperCase()+"%"+(f>>6&63|128).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase(),v}function Ie(p){for(var f="",v=0,P=p.length;v<P;){var x=parseInt(p.substr(v+1,2),16);if(x<128)f+=String.fromCharCode(x),v+=3;else if(x>=194&&x<224){if(P-v>=6){var N=parseInt(p.substr(v+4,2),16);f+=String.fromCharCode((x&31)<<6|N&63)}else f+=p.substr(v,6);v+=6}else if(x>=224){if(P-v>=9){var G=parseInt(p.substr(v+4,2),16),ae=parseInt(p.substr(v+7,2),16);f+=String.fromCharCode((x&15)<<12|(G&63)<<6|ae&63)}else f+=p.substr(v,9);v+=9}else f+=p.substr(v,3),v+=3}return f}function mr(p,f){function v(P){var x=Ie(P);return x.match(f.UNRESERVED)?x:P}return p.scheme&&(p.scheme=String(p.scheme).replace(f.PCT_ENCODED,v).toLowerCase().replace(f.NOT_SCHEME,"")),p.userinfo!==void 0&&(p.userinfo=String(p.userinfo).replace(f.PCT_ENCODED,v).replace(f.NOT_USERINFO,Se).replace(f.PCT_ENCODED,r)),p.host!==void 0&&(p.host=String(p.host).replace(f.PCT_ENCODED,v).toLowerCase().replace(f.NOT_HOST,Se).replace(f.PCT_ENCODED,r)),p.path!==void 0&&(p.path=String(p.path).replace(f.PCT_ENCODED,v).replace(p.scheme?f.NOT_PATH:f.NOT_PATH_NOSCHEME,Se).replace(f.PCT_ENCODED,r)),p.query!==void 0&&(p.query=String(p.query).replace(f.PCT_ENCODED,v).replace(f.NOT_QUERY,Se).replace(f.PCT_ENCODED,r)),p.fragment!==void 0&&(p.fragment=String(p.fragment).replace(f.PCT_ENCODED,v).replace(f.NOT_FRAGMENT,Se).replace(f.PCT_ENCODED,r)),p}function ir(p){return p.replace(/^0*(.*)/,"$1")||"0"}function Pe(p,f){var v=p.match(f.IPV4ADDRESS)||[],P=h(v,2),x=P[1];return x?x.split(".").map(ir).join("."):p}function ye(p,f){var v=p.match(f.IPV6ADDRESS)||[],P=h(v,3),x=P[1],N=P[2];if(x){for(var G=x.toLowerCase().split("::").reverse(),ae=h(G,2),oe=ae[0],xe=ae[1],te=xe?xe.split(":").map(ir):[],me=oe.split(":").map(ir),Ee=f.IPV4ADDRESS.test(me[me.length-1]),he=Ee?7:8,ne=me.length-he,ve=Array(he),ce=0;ce<he;++ce)ve[ce]=te[ce]||me[ne+ce]||"";Ee&&(ve[he-1]=Pe(ve[he-1],f));var Tr=ve.reduce(function(He,rr,$r){if(!rr||rr==="0"){var lr=He[He.length-1];lr&&lr.index+lr.length===$r?lr.length++:He.push({index:$r,length:1})}return He},[]),Me=Tr.sort(function(He,rr){return rr.length-He.length})[0],Ve=void 0;if(Me&&Me.length>1){var ue=ve.slice(0,Me.index),qe=ve.slice(Me.index+Me.length);Ve=ue.join(":")+"::"+qe.join(":")}else Ve=ve.join(":");return N&&(Ve+="%"+N),Ve}else return p}var Sr=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,$e="".match(/(){0}/)[1]===void 0;function ie(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={},P=f.iri!==!1?u:c;f.reference==="suffix"&&(p=(f.scheme?f.scheme+":":"")+"//"+p);var x=p.match(Sr);if(x){$e?(v.scheme=x[1],v.userinfo=x[3],v.host=x[4],v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=x[7],v.fragment=x[8],isNaN(v.port)&&(v.port=x[5])):(v.scheme=x[1]||void 0,v.userinfo=p.indexOf("@")!==-1?x[3]:void 0,v.host=p.indexOf("//")!==-1?x[4]:void 0,v.port=parseInt(x[5],10),v.path=x[6]||"",v.query=p.indexOf("?")!==-1?x[7]:void 0,v.fragment=p.indexOf("#")!==-1?x[8]:void 0,isNaN(v.port)&&(v.port=p.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?x[4]:void 0)),v.host&&(v.host=ye(Pe(v.host,P),P)),v.scheme===void 0&&v.userinfo===void 0&&v.host===void 0&&v.port===void 0&&!v.path&&v.query===void 0?v.reference="same-document":v.scheme===void 0?v.reference="relative":v.fragment===void 0?v.reference="absolute":v.reference="uri",f.reference&&f.reference!=="suffix"&&f.reference!==v.reference&&(v.error=v.error||"URI is not a "+f.reference+" reference.");var N=be[(f.scheme||v.scheme||"").toLowerCase()];if(!f.unicodeSupport&&(!N||!N.unicodeSupport)){if(v.host&&(f.domainHost||N&&N.domainHost))try{v.host=se.toASCII(v.host.replace(P.PCT_ENCODED,Ie).toLowerCase())}catch(G){v.error=v.error||"Host's domain name can not be converted to ASCII via punycode: "+G}mr(v,c)}else mr(v,P);N&&N.parse&&N.parse(v,f)}else v.error=v.error||"URI can not be parsed.";return v}function vr(p,f){var v=f.iri!==!1?u:c,P=[];return p.userinfo!==void 0&&(P.push(p.userinfo),P.push("@")),p.host!==void 0&&P.push(ye(Pe(String(p.host),v),v).replace(v.IPV6ADDRESS,function(x,N,G){return"["+N+(G?"%25"+G:"")+"]"})),(typeof p.port=="number"||typeof p.port=="string")&&(P.push(":"),P.push(String(p.port))),P.length?P.join(""):void 0}var or=/^\.\.?\//,Rr=/^\/\.(\/|$)/,wr=/^\/\.\.(\/|$)/,Re=/^\/?(?:.|\n)*?(?=\/|$)/;function ze(p){for(var f=[];p.length;)if(p.match(or))p=p.replace(or,"");else if(p.match(Rr))p=p.replace(Rr,"/");else if(p.match(wr))p=p.replace(wr,"/"),f.pop();else if(p==="."||p==="..")p="";else{var v=p.match(Re);if(v){var P=v[0];p=p.slice(P.length),f.push(P)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function Ce(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=f.iri?u:c,P=[],x=be[(f.scheme||p.scheme||"").toLowerCase()];if(x&&x.serialize&&x.serialize(p,f),p.host&&!v.IPV6ADDRESS.test(p.host)){if(f.domainHost||x&&x.domainHost)try{p.host=f.iri?se.toUnicode(p.host):se.toASCII(p.host.replace(v.PCT_ENCODED,Ie).toLowerCase())}catch(ae){p.error=p.error||"Host's domain name can not be converted to "+(f.iri?"Unicode":"ASCII")+" via punycode: "+ae}}mr(p,v),f.reference!=="suffix"&&p.scheme&&(P.push(p.scheme),P.push(":"));var N=vr(p,f);if(N!==void 0&&(f.reference!=="suffix"&&P.push("//"),P.push(N),p.path&&p.path.charAt(0)!=="/"&&P.push("/")),p.path!==void 0){var G=p.path;!f.absolutePath&&(!x||!x.absolutePath)&&(G=ze(G)),N===void 0&&(G=G.replace(/^\/\//,"/%2F")),P.push(G)}return p.query!==void 0&&(P.push("?"),P.push(p.query)),p.fragment!==void 0&&(P.push("#"),P.push(p.fragment)),P.join("")}function ke(p,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=arguments[3],x={};return P||(p=ie(Ce(p,v),v),f=ie(Ce(f,v),v)),v=v||{},!v.tolerant&&f.scheme?(x.scheme=f.scheme,x.userinfo=f.userinfo,x.host=f.host,x.port=f.port,x.path=ze(f.path||""),x.query=f.query):(f.userinfo!==void 0||f.host!==void 0||f.port!==void 0?(x.userinfo=f.userinfo,x.host=f.host,x.port=f.port,x.path=ze(f.path||""),x.query=f.query):(f.path?(f.path.charAt(0)==="/"?x.path=ze(f.path):((p.userinfo!==void 0||p.host!==void 0||p.port!==void 0)&&!p.path?x.path="/"+f.path:p.path?x.path=p.path.slice(0,p.path.lastIndexOf("/")+1)+f.path:x.path=f.path,x.path=ze(x.path)),x.query=f.query):(x.path=p.path,f.query!==void 0?x.query=f.query:x.query=p.query),x.userinfo=p.userinfo,x.host=p.host,x.port=p.port),x.scheme=p.scheme),x.fragment=f.fragment,x}function Ye(p,f,v){var P=o({scheme:"null"},v);return Ce(ke(ie(p,P),ie(f,P),P,!0),P)}function Fe(p,f){return typeof p=="string"?p=Ce(ie(p,f),f):s(p)==="object"&&(p=ie(Ce(p,f),f)),p}function wt(p,f,v){return typeof p=="string"?p=Ce(ie(p,v),v):s(p)==="object"&&(p=Ce(p,v)),typeof f=="string"?f=Ce(ie(f,v),v):s(f)==="object"&&(f=Ce(f,v)),p===f}function Sa(p,f){return p&&p.toString().replace(!f||!f.iri?c.ESCAPE:u.ESCAPE,Se)}function Ke(p,f){return p&&p.toString().replace(!f||!f.iri?c.PCT_ENCODED:u.PCT_ENCODED,Ie)}var ut={scheme:"http",domainHost:!0,parse:function(f,v){return f.host||(f.error=f.error||"HTTP URIs must have a host."),f},serialize:function(f,v){var P=String(f.scheme).toLowerCase()==="https";return(f.port===(P?443:80)||f.port==="")&&(f.port=void 0),f.path||(f.path="/"),f}},_s={scheme:"https",domainHost:ut.domainHost,parse:ut.parse,serialize:ut.serialize};function bs(p){return typeof p.secure=="boolean"?p.secure:String(p.scheme).toLowerCase()==="wss"}var dt={scheme:"ws",domainHost:!0,parse:function(f,v){var P=f;return P.secure=bs(P),P.resourceName=(P.path||"/")+(P.query?"?"+P.query:""),P.path=void 0,P.query=void 0,P},serialize:function(f,v){if((f.port===(bs(f)?443:80)||f.port==="")&&(f.port=void 0),typeof f.secure=="boolean"&&(f.scheme=f.secure?"wss":"ws",f.secure=void 0),f.resourceName){var P=f.resourceName.split("?"),x=h(P,2),N=x[0],G=x[1];f.path=N&&N!=="/"?N:void 0,f.query=G,f.resourceName=void 0}return f.fragment=void 0,f}},Ps={scheme:"wss",domainHost:dt.domainHost,parse:dt.parse,serialize:dt.serialize},Bo={},Qo=!0,xs="[A-Za-z0-9\\-\\.\\_\\~"+(Qo?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",er="[0-9A-Fa-f]",Jo=t(t("%[EFef]"+er+"%"+er+er+"%"+er+er)+"|"+t("%[89A-Fa-f]"+er+"%"+er+er)+"|"+t("%"+er+er)),Ko="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Go="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Wo=e(Go,'[\\"\\\\]'),Xo="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Yo=new RegExp(xs,"g"),Jr=new RegExp(Jo,"g"),el=new RegExp(e("[^]",Ko,"[\\.]",'[\\"]',Wo),"g"),Es=new RegExp(e("[^]",xs,Xo),"g"),rl=Es;function Ra(p){var f=Ie(p);return f.match(Yo)?f:p}var Ss={scheme:"mailto",parse:function(f,v){var P=f,x=P.to=P.path?P.path.split(","):[];if(P.path=void 0,P.query){for(var N=!1,G={},ae=P.query.split("&"),oe=0,xe=ae.length;oe<xe;++oe){var te=ae[oe].split("=");switch(te[0]){case"to":for(var me=te[1].split(","),Ee=0,he=me.length;Ee<he;++Ee)x.push(me[Ee]);break;case"subject":P.subject=Ke(te[1],v);break;case"body":P.body=Ke(te[1],v);break;default:N=!0,G[Ke(te[0],v)]=Ke(te[1],v);break}}N&&(P.headers=G)}P.query=void 0;for(var ne=0,ve=x.length;ne<ve;++ne){var ce=x[ne].split("@");if(ce[0]=Ke(ce[0]),v.unicodeSupport)ce[1]=Ke(ce[1],v).toLowerCase();else try{ce[1]=se.toASCII(Ke(ce[1],v).toLowerCase())}catch(Tr){P.error=P.error||"Email address's domain name can not be converted to ASCII via punycode: "+Tr}x[ne]=ce.join("@")}return P},serialize:function(f,v){var P=f,x=n(f.to);if(x){for(var N=0,G=x.length;N<G;++N){var ae=String(x[N]),oe=ae.lastIndexOf("@"),xe=ae.slice(0,oe).replace(Jr,Ra).replace(Jr,r).replace(el,Se),te=ae.slice(oe+1);try{te=v.iri?se.toUnicode(te):se.toASCII(Ke(te,v).toLowerCase())}catch(ne){P.error=P.error||"Email address's domain name can not be converted to "+(v.iri?"Unicode":"ASCII")+" via punycode: "+ne}x[N]=xe+"@"+te}P.path=x.join(",")}var me=f.headers=f.headers||{};f.subject&&(me.subject=f.subject),f.body&&(me.body=f.body);var Ee=[];for(var he in me)me[he]!==Bo[he]&&Ee.push(he.replace(Jr,Ra).replace(Jr,r).replace(Es,Se)+"="+me[he].replace(Jr,Ra).replace(Jr,r).replace(rl,Se));return Ee.length&&(P.query=Ee.join("&")),P}},tl=/^([^\:]+)\:(.*)/,Rs={scheme:"urn",parse:function(f,v){var P=f.path&&f.path.match(tl),x=f;if(P){var N=v.scheme||x.scheme||"urn",G=P[1].toLowerCase(),ae=P[2],oe=N+":"+(v.nid||G),xe=be[oe];x.nid=G,x.nss=ae,x.path=void 0,xe&&(x=xe.parse(x,v))}else x.error=x.error||"URN can not be parsed.";return x},serialize:function(f,v){var P=v.scheme||f.scheme||"urn",x=f.nid,N=P+":"+(v.nid||x),G=be[N];G&&(f=G.serialize(f,v));var ae=f,oe=f.nss;return ae.path=(x||v.nid)+":"+oe,ae}},al=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ws={scheme:"urn:uuid",parse:function(f,v){var P=f;return P.uuid=P.nss,P.nss=void 0,!v.tolerant&&(!P.uuid||!P.uuid.match(al))&&(P.error=P.error||"UUID is not valid."),P},serialize:function(f,v){var P=f;return P.nss=(f.uuid||"").toLowerCase(),P}};be[ut.scheme]=ut,be[_s.scheme]=_s,be[dt.scheme]=dt,be[Ps.scheme]=Ps,be[Ss.scheme]=Ss,be[Rs.scheme]=Rs,be[ws.scheme]=ws,a.SCHEMES=be,a.pctEncChar=Se,a.pctDecChars=Ie,a.parse=ie,a.removeDotSegments=ze,a.serialize=Ce,a.resolveComponents=ke,a.resolve=Ye,a.normalize=Fe,a.equal=wt,a.escapeComponent=Sa,a.unescapeComponent=Ke,Object.defineProperty(a,"__esModule",{value:!0})})});var Yt=Q((ah,cn)=>{"use strict";cn.exports=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,r,n;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!a(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(r=s;r--!==0;){var o=n[r];if(!a(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}});var dn=Q((sh,un)=>{"use strict";un.exports=function(e){for(var t=0,s=e.length,r=0,n;r<s;)t++,n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<s&&(n=e.charCodeAt(r),(n&64512)==56320&&r++);return t}});var Br=Q((nh,pn)=>{"use strict";pn.exports={copy:_u,checkDataType:Ua,checkDataTypes:bu,coerceToTypes:Pu,toHash:Ba,getProperty:Qa,escapeQuotes:Ja,equal:Yt(),ucs2length:dn(),varOccurences:Su,varReplace:Ru,schemaHasRules:wu,schemaHasRulesExcept:Tu,schemaUnknownRules:$u,toQuotedString:Za,getPathExpr:Ou,getPath:Au,getData:Du,unescapeFragment:Cu,unescapeJsonPointer:Ga,escapeFragment:ju,escapeJsonPointer:Ka};function _u(a,e){e=e||{};for(var t in a)e[t]=a[t];return e}function Ua(a,e,t,s){var r=s?" !== ":" === ",n=s?" || ":" && ",o=s?"!":"",i=s?"":"!";switch(a){case"null":return e+r+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+n+"typeof "+e+r+'"object"'+n+i+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+n+i+"("+e+" % 1)"+n+e+r+e+(t?n+o+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+a+'"'+(t?n+o+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+a+'"'}}function bu(a,e,t){switch(a.length){case 1:return Ua(a[0],e,t,!0);default:var s="",r=Ba(a);r.array&&r.object&&(s=r.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var n in r)s+=(s?" && ":"")+Ua(n,e,t,!0);return s}}var fn=Ba(["string","number","integer","boolean","null"]);function Pu(a,e){if(Array.isArray(e)){for(var t=[],s=0;s<e.length;s++){var r=e[s];(fn[r]||a==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(fn[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Ba(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=!0;return e}var xu=/^[a-z$_][a-z$_0-9]*$/i,Eu=/'|\\/g;function Qa(a){return typeof a=="number"?"["+a+"]":xu.test(a)?"."+a:"['"+Ja(a)+"']"}function Ja(a){return a.replace(Eu,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Su(a,e){e+="[^0-9]";var t=a.match(new RegExp(e,"g"));return t?t.length:0}function Ru(a,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),t+"$1")}function wu(a,e){if(typeof a=="boolean")return!a;for(var t in a)if(e[t])return!0}function Tu(a,e,t){if(typeof a=="boolean")return!a&&t!="not";for(var s in a)if(s!=t&&e[s])return!0}function $u(a,e){if(typeof a!="boolean"){for(var t in a)if(!e[t])return t}}function Za(a){return"'"+Ja(a)+"'"}function Ou(a,e,t,s){var r=t?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return hn(a,r)}function Au(a,e,t){var s=Za(t?"/"+Ka(e):Qa(e));return hn(a,s)}var Iu=/^\/(?:[^~]|~0|~1)*$/,ku=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Du(a,e,t){var s,r,n,o;if(a==="")return"rootData";if(a[0]=="/"){if(!Iu.test(a))throw new Error("Invalid JSON-pointer: "+a);r=a,n="rootData"}else{if(o=a.match(ku),!o)throw new Error("Invalid JSON-pointer: "+a);if(s=+o[1],r=o[2],r=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return t[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(n="data"+(e-s||""),!r)return n}for(var i=n,c=r.split("/"),u=0;u<c.length;u++){var h=c[u];h&&(n+=Qa(Ga(h)),i+=" && "+n)}return i}function hn(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Cu(a){return Ga(decodeURIComponent(a))}function ju(a){return encodeURIComponent(Ka(a))}function Ka(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Ga(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var Wa=Q((ih,mn)=>{"use strict";var Nu=Br();mn.exports=Lu;function Lu(a){Nu.copy(a,this)}});var gn=Q((oh,vn)=>{"use strict";var Pr=vn.exports=function(a,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var s=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};ea(e,s,r,a,"",a)};Pr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Pr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Pr.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Pr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ea(a,e,t,s,r,n,o,i,c,u){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,r,n,o,i,c,u);for(var h in s){var m=s[h];if(Array.isArray(m)){if(h in Pr.arrayKeywords)for(var b=0;b<m.length;b++)ea(a,e,t,m[b],r+"/"+h+"/"+b,n,r,h,s,b)}else if(h in Pr.propsKeywords){if(m&&typeof m=="object")for(var d in m)ea(a,e,t,m[d],r+"/"+h+"/"+Fu(d),n,r,h,s,d)}else(h in Pr.keywords||a.allKeys&&!(h in Pr.skipKeywords))&&ea(a,e,t,m,r+"/"+h,n,r,h,s)}t(s,r,n,o,i,c,u)}}function Fu(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var ia=Q((lh,Pn)=>{"use strict";var St=ln(),yn=Yt(),sa=Br(),ra=Wa(),Mu=gn();Pn.exports=Er;Er.normalizeId=xr;Er.fullPath=ta;Er.url=aa;Er.ids=Uu;Er.inlineRef=Xa;Er.schema=na;function Er(a,e,t){var s=this._refs[t];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return Er.call(this,a,e,s);if(s=s||this._schemas[t],s instanceof ra)return Xa(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r=na.call(this,e,t),n,o,i;return r&&(n=r.schema,e=r.root,i=r.baseId),n instanceof ra?o=n.validate||a.call(this,n.schema,e,void 0,i):n!==void 0&&(o=Xa(n,this._opts.inlineRefs)?n:a.call(this,n,e,void 0,i)),o}function na(a,e){var t=St.parse(e),s=bn(t),r=ta(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==r){var n=xr(s),o=this._refs[n];if(typeof o=="string")return qu.call(this,a,o,t);if(o instanceof ra)o.validate||this._compile(o),a=o;else if(o=this._schemas[n],o instanceof ra){if(o.validate||this._compile(o),n==xr(e))return{schema:o,root:a,baseId:r};a=o}else return;if(!a.schema)return;r=ta(this._getId(a.schema))}return _n.call(this,t,r,a.schema,a)}function qu(a,e,t){var s=na.call(this,a,e);if(s){var r=s.schema,n=s.baseId;a=s.root;var o=this._getId(r);return o&&(n=aa(n,o)),_n.call(this,t,n,r,a)}}var zu=sa.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function _n(a,e,t,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var r=a.fragment.split("/"),n=1;n<r.length;n++){var o=r[n];if(o){if(o=sa.unescapeFragment(o),t=t[o],t===void 0)break;var i;if(!zu[o]&&(i=this._getId(t),i&&(e=aa(e,i)),t.$ref)){var c=aa(e,t.$ref),u=na.call(this,s,c);u&&(t=u.schema,s=u.root,e=u.baseId)}}}if(t!==void 0&&t!==s.schema)return{schema:t,root:s,baseId:e}}}var Vu=sa.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Xa(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Ya(a);if(e)return es(a)<=e}function Ya(a){var e;if(Array.isArray(a)){for(var t=0;t<a.length;t++)if(e=a[t],typeof e=="object"&&!Ya(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!Ya(e)))return!1;return!0}function es(a){var e=0,t;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(t=a[s],typeof t=="object"&&(e+=es(t)),e==1/0)return 1/0}else for(var r in a){if(r=="$ref")return 1/0;if(Vu[r])e++;else if(t=a[r],typeof t=="object"&&(e+=es(t)+1),e==1/0)return 1/0}return e}function ta(a,e){e!==!1&&(a=xr(a));var t=St.parse(a);return bn(t)}function bn(a){return St.serialize(a).split("#")[0]+"#"}var Hu=/#\/?$/;function xr(a){return a?a.replace(Hu,""):""}function aa(a,e){return e=xr(e),St.resolve(a,e)}function Uu(a){var e=xr(this._getId(a)),t={"":e},s={"":ta(e,!1)},r={},n=this;return Mu(a,{allKeys:!0},function(o,i,c,u,h,m,b){if(i!==""){var d=n._getId(o),y=t[u],_=s[u]+"/"+h;if(b!==void 0&&(_+="/"+(typeof b=="number"?b:sa.escapeFragment(b))),typeof d=="string"){d=y=xr(y?St.resolve(y,d):d);var g=n._refs[d];if(typeof g=="string"&&(g=n._refs[g]),g&&g.schema){if(!yn(o,g.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=xr(_))if(d[0]=="#"){if(r[d]&&!yn(o,r[d]))throw new Error('id "'+d+'" resolves to more than one schema');r[d]=o}else n._refs[d]=_}t[i]=y,s[i]=_}}),r}});var oa=Q((ch,En)=>{"use strict";var rs=ia();En.exports={Validation:xn(Zu),MissingRef:xn(ts)};function Zu(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}ts.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function ts(a,e,t){this.message=t||ts.message(a,e),this.missingRef=rs.url(a,e),this.missingSchema=rs.normalizeId(rs.fullPath(this.missingRef))}function xn(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var as=Q((uh,Sn)=>{"use strict";Sn.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&function(n){return function(o){return function(i,c){var u={key:i,value:o[i]},h={key:c,value:o[c]};return n(u,h)}}}(e.cmp),r=[];return function n(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var i,c;if(Array.isArray(o)){for(c="[",i=0;i<o.length;i++)i&&(c+=","),c+=n(o[i])||"null";return c+"]"}if(o===null)return"null";if(r.indexOf(o)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=r.push(o)-1,h=Object.keys(o).sort(s&&s(o));for(c="",i=0;i<h.length;i++){var m=h[i],b=n(o[m]);b&&(c&&(c+=","),c+=JSON.stringify(m)+":"+b)}return r.splice(u,1),"{"+c+"}"}}(a)}});var ss=Q((dh,Rn)=>{"use strict";Rn.exports=function(e,t,s){var r="",n=e.schema.$async===!0,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var c=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(c){var u="unknown keyword: "+c;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(r+=" var validate = ",n&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+i+" */")+" ")),typeof e.schema=="boolean"||!(o||e.schema.$ref)){var t="false schema",h=e.level,m=e.dataLevel,b=e.schema[t],d=e.schemaPath+e.util.getProperty(t),y=e.errSchemaPath+"/"+t,A=!e.opts.allErrors,q,_="data"+(m||""),w="valid"+h;if(e.schema===!1){e.isTop?A=!0:r+=" var "+w+" = false; ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(q||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var E=r;r=g.pop(),!e.compositeRule&&A?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+w+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var O=e.isTop,h=e.level=0,m=e.dataLevel=0,_="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var S="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,m=e.dataLevel,_="data"+(m||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),n&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+h+" = errors;"}var w="valid"+h,A=!e.opts.allErrors,I="",H="",q,k=e.schema.type,z=Array.isArray(k);if(k&&e.opts.nullable&&e.schema.nullable===!0&&(z?k.indexOf("null")==-1&&(k=k.concat("null")):k!="null"&&(k=[k,"null"],z=!0)),z&&k.length==1&&(k=k[0],z=!1),e.schema.$ref&&o){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),k){if(e.opts.coerceTypes)var M=e.util.coerceToTypes(e.opts.coerceTypes,k);var L=e.RULES.types[k];if(M||z||L===!0||L&&!Re(L)){var d=e.schemaPath+".type",y=e.errSchemaPath+"/type",d=e.schemaPath+".type",y=e.errSchemaPath+"/type",$=z?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[$](k,_,e.opts.strictNumbers,!0)+") { ",M){var D="dataType"+h,F="coerced"+h;r+=" var "+D+" = typeof "+_+"; var "+F+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+D+" == 'object' && Array.isArray("+_+") && "+_+".length == 1) { "+_+" = "+_+"[0]; "+D+" = typeof "+_+"; if ("+e.util.checkDataType(e.schema.type,_,e.opts.strictNumbers)+") "+F+" = "+_+"; } "),r+=" if ("+F+" !== undefined) ; ";var le=M;if(le)for(var X,re=-1,W=le.length-1;re<W;)X=le[re+=1],X=="string"?r+=" else if ("+D+" == 'number' || "+D+" == 'boolean') "+F+" = '' + "+_+"; else if ("+_+" === null) "+F+" = ''; ":X=="number"||X=="integer"?(r+=" else if ("+D+" == 'boolean' || "+_+" === null || ("+D+" == 'string' && "+_+" && "+_+" == +"+_+" ",X=="integer"&&(r+=" && !("+_+" % 1)"),r+=")) "+F+" = +"+_+"; "):X=="boolean"?r+=" else if ("+_+" === 'false' || "+_+" === 0 || "+_+" === null) "+F+" = false; else if ("+_+" === 'true' || "+_+" === 1) "+F+" = true; ":X=="null"?r+=" else if ("+_+" === '' || "+_+" === 0 || "+_+" === false) "+F+" = null; ":e.opts.coerceTypes=="array"&&X=="array"&&(r+=" else if ("+D+" == 'string' || "+D+" == 'number' || "+D+" == 'boolean' || "+_+" == null) "+F+" = ["+_+"]; ");r+=" else {   ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(q||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",z?r+=""+k.join(","):r+=""+k,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",z?r+=""+k.join(","):r+=""+k,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var E=r;r=g.pop(),!e.compositeRule&&A?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+F+" !== undefined) {  ";var U=m?"data"+(m-1||""):"parentData",ge=m?e.dataPathArr[m]:"parentDataProperty";r+=" "+_+" = "+F+"; ",m||(r+="if ("+U+" !== undefined)"),r+=" "+U+"["+ge+"] = "+F+"; } "}else{var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(q||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",z?r+=""+k.join(","):r+=""+k,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",z?r+=""+k.join(","):r+=""+k,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var E=r;r=g.pop(),!e.compositeRule&&A?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!o)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",A&&(r+=" } if (errors === ",O?r+="0":r+="errs_"+h,r+=") { ",H+="}");else{var Te=e.RULES;if(Te){for(var L,Ae=-1,se=Te.length-1;Ae<se;)if(L=Te[Ae+=1],Re(L)){if(L.type&&(r+=" if ("+e.util.checkDataType(L.type,_,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(L.type=="object"&&e.schema.properties){var b=e.schema.properties,be=Object.keys(b),Se=be;if(Se)for(var Ie,mr=-1,ir=Se.length-1;mr<ir;){Ie=Se[mr+=1];var Pe=b[Ie];if(Pe.default!==void 0){var ye=_+e.util.getProperty(Ie);if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ye;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else r+=" if ("+ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+ye+" === null || "+ye+" === '' "),r+=" ) "+ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(Pe.default)+" ":r+=" "+JSON.stringify(Pe.default)+" ",r+="; "}}}else if(L.type=="array"&&Array.isArray(e.schema.items)){var Sr=e.schema.items;if(Sr){for(var Pe,re=-1,$e=Sr.length-1;re<$e;)if(Pe=Sr[re+=1],Pe.default!==void 0){var ye=_+"["+re+"]";if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ye;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else r+=" if ("+ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+ye+" === null || "+ye+" === '' "),r+=" ) "+ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(Pe.default)+" ":r+=" "+JSON.stringify(Pe.default)+" ",r+="; "}}}}var ie=L.rules;if(ie){for(var vr,or=-1,Rr=ie.length-1;or<Rr;)if(vr=ie[or+=1],ze(vr)){var wr=vr.code(e,vr.keyword,L.type);wr&&(r+=" "+wr+" ",A&&(I+="}"))}}if(A&&(r+=" "+I+" ",I=""),L.type&&(r+=" } ",k&&k===L.type&&!M)){r+=" else { ";var d=e.schemaPath+".type",y=e.errSchemaPath+"/type",g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(q||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",z?r+=""+k.join(","):r+=""+k,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",z?r+=""+k.join(","):r+=""+k,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var E=r;r=g.pop(),!e.compositeRule&&A?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}A&&(r+=" if (errors === ",O?r+="0":r+="errs_"+h,r+=") { ",H+="}")}}}A&&(r+=" "+H+" "),O?(n?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+w+" = errors === errs_"+h+";";function Re(ke){for(var Ye=ke.rules,Fe=0;Fe<Ye.length;Fe++)if(ze(Ye[Fe]))return!0}function ze(ke){return e.schema[ke.keyword]!==void 0||ke.implements&&Ce(ke)}function Ce(ke){for(var Ye=ke.implements,Fe=0;Fe<Ye.length;Fe++)if(e.schema[Ye[Fe]]!==void 0)return!0}return r}});var An=Q((fh,On)=>{"use strict";var la=ia(),ua=Br(),Tn=oa(),Bu=as(),wn=ss(),Qu=ua.ucs2length,Ju=Yt(),Ku=Tn.Validation;On.exports=ns;function ns(a,e,t,s){var r=this,n=this._opts,o=[void 0],i={},c=[],u={},h=[],m={},b=[];e=e||{schema:a,refVal:o,refs:i};var d=Gu.call(this,a,e,s),y=this._compilations[d.index];if(d.compiling)return y.callValidate=S;var _=this._formats,g=this.RULES;try{var E=w(a,e,t,s);y.validate=E;var O=y.callValidate;return O&&(O.schema=E.schema,O.errors=null,O.refs=E.refs,O.refVal=E.refVal,O.root=E.root,O.$async=E.$async,n.sourceCode&&(O.source=E.source)),E}finally{Wu.call(this,a,e,s)}function S(){var $=y.validate,D=$.apply(this,arguments);return S.errors=$.errors,D}function w($,D,F,le){var X=!D||D&&D.schema==$;if(D.schema!=e.schema)return ns.call(r,$,D,F,le);var re=$.$async===!0,W=wn({isTop:!0,schema:$,isRoot:X,baseId:le,root:D,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Tn.MissingRef,RULES:g,validate:wn,util:ua,resolve:la,resolveRef:A,usePattern:z,useDefault:M,useCustomRule:L,opts:n,formats:_,logger:r.logger,self:r});W=ca(o,ed)+ca(c,Xu)+ca(h,Yu)+ca(b,rd)+W,n.processCode&&(W=n.processCode(W,$));var U;try{var ge=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",W);U=ge(r,g,_,e,o,h,b,Ju,Qu,Ku),o[0]=U}catch(Te){throw r.logger.error("Error compiling schema, function code:",W),Te}return U.schema=$,U.errors=null,U.refs=i,U.refVal=o,U.root=X?U:D,re&&(U.$async=!0),n.sourceCode===!0&&(U.source={code:W,patterns:c,defaults:h}),U}function A($,D,F){D=la.url($,D);var le=i[D],X,re;if(le!==void 0)return X=o[le],re="refVal["+le+"]",k(X,re);if(!F&&e.refs){var W=e.refs[D];if(W!==void 0)return X=e.refVal[W],re=I(D,X),k(X,re)}re=I(D);var U=la.call(r,w,e,D);if(U===void 0){var ge=t&&t[D];ge&&(U=la.inlineRef(ge,n.inlineRefs)?ge:ns.call(r,ge,e,t,$))}if(U===void 0)H(D);else return q(D,U),k(U,re)}function I($,D){var F=o.length;return o[F]=D,i[$]=F,"refVal"+F}function H($){delete i[$]}function q($,D){var F=i[$];o[F]=D}function k($,D){return typeof $=="object"||typeof $=="boolean"?{code:D,schema:$,inline:!0}:{code:D,$async:$&&!!$.$async}}function z($){var D=u[$];return D===void 0&&(D=u[$]=c.length,c[D]=$),"pattern"+D}function M($){switch(typeof $){case"boolean":case"number":return""+$;case"string":return ua.toQuotedString($);case"object":if($===null)return"null";var D=Bu($),F=m[D];return F===void 0&&(F=m[D]=h.length,h[F]=$),"default"+F}}function L($,D,F,le){if(r._opts.validateSchema!==!1){var X=$.definition.dependencies;if(X&&!X.every(function(Se){return Object.prototype.hasOwnProperty.call(F,Se)}))throw new Error("parent schema must have all required keywords: "+X.join(","));var re=$.definition.validateSchema;if(re){var W=re(D);if(!W){var U="keyword schema is invalid: "+r.errorsText(re.errors);if(r._opts.validateSchema=="log")r.logger.error(U);else throw new Error(U)}}}var ge=$.definition.compile,Te=$.definition.inline,Ae=$.definition.macro,se;if(ge)se=ge.call(r,D,F,le);else if(Ae)se=Ae.call(r,D,F,le),n.validateSchema!==!1&&r.validateSchema(se,!0);else if(Te)se=Te.call(r,le,$.keyword,D,F);else if(se=$.definition.validate,!se)return;if(se===void 0)throw new Error('custom keyword "'+$.keyword+'"failed to compile');var be=b.length;return b[be]=se,{code:"customRule"+be,validate:se}}}function Gu(a,e,t){var s=$n.call(this,a,e,t);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:t},{index:s,compiling:!1})}function Wu(a,e,t){var s=$n.call(this,a,e,t);s>=0&&this._compilations.splice(s,1)}function $n(a,e,t){for(var s=0;s<this._compilations.length;s++){var r=this._compilations[s];if(r.schema==a&&r.root==e&&r.baseId==t)return s}return-1}function Xu(a,e){return"var pattern"+a+" = new RegExp("+ua.toQuotedString(e[a])+");"}function Yu(a){return"var default"+a+" = defaults["+a+"];"}function ed(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function rd(a){return"var customRule"+a+" = customRules["+a+"];"}function ca(a,e){if(!a.length)return"";for(var t="",s=0;s<a.length;s++)t+=e(s,a);return t}});var kn=Q((hh,In)=>{"use strict";var da=In.exports=function(){this._cache={}};da.prototype.put=function(e,t){this._cache[e]=t};da.prototype.get=function(e){return this._cache[e]};da.prototype.del=function(e){delete this._cache[e]};da.prototype.clear=function(){this._cache={}}});var Un=Q((ph,Hn)=>{"use strict";var td=Br(),ad=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,sd=[0,31,28,31,30,31,30,31,31,30,31,30,31],nd=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Dn=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,id=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,od=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Cn=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,jn=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Nn=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Ln=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Fn=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Mn=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Hn.exports=fa;function fa(a){return a=a=="full"?"full":"fast",td.copy(fa[a])}fa.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Cn,url:jn,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Dn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Vn,uuid:Nn,"json-pointer":Ln,"json-pointer-uri-fragment":Fn,"relative-json-pointer":Mn};fa.full={date:qn,time:zn,"date-time":ud,uri:fd,"uri-reference":od,"uri-template":Cn,url:jn,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Dn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Vn,uuid:Nn,"json-pointer":Ln,"json-pointer-uri-fragment":Fn,"relative-json-pointer":Mn};function ld(a){return a%4===0&&(a%100!==0||a%400===0)}function qn(a){var e=a.match(ad);if(!e)return!1;var t=+e[1],s=+e[2],r=+e[3];return s>=1&&s<=12&&r>=1&&r<=(s==2&&ld(t)?29:sd[s])}function zn(a,e){var t=a.match(nd);if(!t)return!1;var s=t[1],r=t[2],n=t[3],o=t[5];return(s<=23&&r<=59&&n<=59||s==23&&r==59&&n==60)&&(!e||o)}var cd=/t|\s/i;function ud(a){var e=a.split(cd);return e.length==2&&qn(e[0])&&zn(e[1],!0)}var dd=/\/|:/;function fd(a){return dd.test(a)&&id.test(a)}var hd=/[^\\]\\Z/;function Vn(a){if(hd.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var Bn=Q((mh,Zn)=>{"use strict";Zn.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),m="valid"+n,b,d;if(i=="#"||i=="#/")e.isRoot?(b=e.async,d="validate"):(b=e.root.schema.$async===!0,d="root.refVal[0]");else{var y=e.resolveRef(e.baseId,i,e.isRoot);if(y===void 0){var _=e.MissingRefError.message(e.baseId,i);if(e.opts.missingRefs=="fail"){e.logger.error(_);var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(i)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(i)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(i)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var E=r;r=g.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(_),u&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,i,_)}else if(y.inline){var O=e.util.copy(e);O.level++;var S="valid"+O.level;O.schema=y.schema,O.schemaPath="",O.errSchemaPath=i;var w=e.validate(O).replace(/validate\.schema/g,y.code);r+=" "+w+" ",u&&(r+=" if ("+S+") { ")}else b=y.$async===!0||e.async&&y.$async!==!1,d=y.code}if(d){var g=g||[];g.push(r),r="",e.opts.passContext?r+=" "+d+".call(this, ":r+=" "+d+"( ",r+=" "+h+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var A=o?"data"+(o-1||""):"parentData",I=o?e.dataPathArr[o]:"parentDataProperty";r+=" , "+A+" , "+I+", rootData)  ";var H=r;if(r=g.pop(),b){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(r+=" var "+m+"; "),r+=" try { await "+H+"; ",u&&(r+=" "+m+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(r+=" "+m+" = false; "),r+=" } ",u&&(r+=" if ("+m+") { ")}else r+=" if (!"+H+") { if (vErrors === null) vErrors = "+d+".errors; else vErrors = vErrors.concat("+d+".errors); errors = vErrors.length; } ",u&&(r+=" else { ")}return r}});var Jn=Q((vh,Qn)=>{"use strict";Qn.exports=function(e,t,s){var r=" ",n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u=e.util.copy(e),h="";u.level++;var m="valid"+u.level,b=u.baseId,d=!0,y=n;if(y)for(var _,g=-1,E=y.length-1;g<E;)_=y[g+=1],(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(d=!1,u.schema=_,u.schemaPath=o+"["+g+"]",u.errSchemaPath=i+"/"+g,r+="  "+e.validate(u)+" ",u.baseId=b,c&&(r+=" if ("+m+") { ",h+="}"));return c&&(d?r+=" if (true) { ":r+=" "+h.slice(0,-1)+" "),r}});var Gn=Q((gh,Kn)=>{"use strict";Kn.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d="errs__"+n,y=e.util.copy(e),_="";y.level++;var g="valid"+y.level,E=i.every(function(q){return e.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:e.util.schemaHasRules(q,e.RULES.all)});if(E){var O=y.baseId;r+=" var "+d+" = errors; var "+b+" = false;  ";var S=e.compositeRule;e.compositeRule=y.compositeRule=!0;var w=i;if(w)for(var A,I=-1,H=w.length-1;I<H;)A=w[I+=1],y.schema=A,y.schemaPath=c+"["+I+"]",y.errSchemaPath=u+"/"+I,r+="  "+e.validate(y)+" ",y.baseId=O,r+=" "+b+" = "+b+" || "+g+"; if (!"+b+") { ",_+="}";e.compositeRule=y.compositeRule=S,r+=" "+_+" if (!"+b+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else h&&(r+=" if (true) { ");return r}});var Xn=Q((yh,Wn)=>{"use strict";Wn.exports=function(e,t,s){var r=" ",n=e.schema[t],o=e.errSchemaPath+"/"+t,i=!e.opts.allErrors,c=e.util.toQuotedString(n);return e.opts.$comment===!0?r+=" console.log("+c+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+c+", "+e.util.toQuotedString(o)+", validate.root.schema);"),r}});var ei=Q((_h,Yn)=>{"use strict";Yn.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d=e.opts.$data&&i&&i.$data,y;d?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i,d||(r+=" var schema"+n+" = validate.schema"+c+";"),r+="var "+b+" = equal("+m+", schema"+n+"); if (!"+b+") {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var g=r;return r=_.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}});var ti=Q((bh,ri)=>{"use strict";ri.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d="errs__"+n,y=e.util.copy(e),_="";y.level++;var g="valid"+y.level,E="i"+n,O=y.dataLevel=e.dataLevel+1,S="data"+O,w=e.baseId,A=e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all);if(r+="var "+d+" = errors;var "+b+";",A){var I=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=i,y.schemaPath=c,y.errSchemaPath=u,r+=" var "+g+" = false; for (var "+E+" = 0; "+E+" < "+m+".length; "+E+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var H=m+"["+E+"]";y.dataPathArr[O]=E;var q=e.validate(y);y.baseId=w,e.util.varOccurences(q,S)<2?r+=" "+e.util.varReplace(q,S,H)+" ":r+=" var "+S+" = "+H+"; "+q+" ",r+=" if ("+g+") break; }  ",e.compositeRule=y.compositeRule=I,r+=" "+_+" if (!"+g+") {"}else r+=" if ("+m+".length == 0) {";var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var z=r;return r=k.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+z+"]); ":r+=" validate.errors = ["+z+"]; return false; ":r+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",A&&(r+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var si=Q((Ph,ai)=>{"use strict";ai.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="errs__"+n,d=e.util.copy(e),y="";d.level++;var _="valid"+d.level,g={},E={},O=e.opts.ownProperties;for(I in i)if(I!="__proto__"){var S=i[I],w=Array.isArray(S)?E:g;w[I]=S}r+="var "+b+" = errors;";var A=e.errorPath;r+="var missing"+n+";";for(var I in E)if(w=E[I],w.length){if(r+=" if ( "+m+e.util.getProperty(I)+" !== undefined ",O&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(I)+"') "),h){r+=" && ( ";var H=w;if(H)for(var q,k=-1,z=H.length-1;k<z;){q=H[k+=1],k&&(r+=" || ");var M=e.util.getProperty(q),L=m+M;r+=" ( ( "+L+" === undefined ",O&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(q)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?q:M)+") ) "}r+=")) {  ";var $="missing"+n,D="' + "+$+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(A,$,!0):A+" + "+$);var F=F||[];F.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(I)+"', missingProperty: '"+D+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(w.length==1?w[0]:w.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",w.length==1?r+="property "+e.util.escapeQuotes(w[0]):r+="properties "+e.util.escapeQuotes(w.join(", ")),r+=" when property "+e.util.escapeQuotes(I)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var le=r;r=F.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+le+"]); ":r+=" validate.errors = ["+le+"]; return false; ":r+=" var err = "+le+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var X=w;if(X)for(var q,re=-1,W=X.length-1;re<W;){q=X[re+=1];var M=e.util.getProperty(q),D=e.util.escapeQuotes(q),L=m+M;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(A,q,e.opts.jsonPointers)),r+=" if ( "+L+" === undefined ",O&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(q)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(I)+"', missingProperty: '"+D+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(w.length==1?w[0]:w.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",w.length==1?r+="property "+e.util.escapeQuotes(w[0]):r+="properties "+e.util.escapeQuotes(w.join(", ")),r+=" when property "+e.util.escapeQuotes(I)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",h&&(y+="}",r+=" else { ")}e.errorPath=A;var U=d.baseId;for(var I in g){var S=g[I];(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))&&(r+=" "+_+" = true; if ( "+m+e.util.getProperty(I)+" !== undefined ",O&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(I)+"') "),r+=") { ",d.schema=S,d.schemaPath=c+e.util.getProperty(I),d.errSchemaPath=u+"/"+e.util.escapeFragment(I),r+="  "+e.validate(d)+" ",d.baseId=U,r+=" }  ",h&&(r+=" if ("+_+") { ",y+="}"))}return h&&(r+="   "+y+" if ("+b+" == errors) {"),r}});var ii=Q((xh,ni)=>{"use strict";ni.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d=e.opts.$data&&i&&i.$data,y;d?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i;var _="i"+n,g="schema"+n;d||(r+=" var "+g+" = validate.schema"+c+";"),r+="var "+b+";",d&&(r+=" if (schema"+n+" === undefined) "+b+" = true; else if (!Array.isArray(schema"+n+")) "+b+" = false; else {"),r+=""+b+" = false;for (var "+_+"=0; "+_+"<"+g+".length; "+_+"++) if (equal("+m+", "+g+"["+_+"])) { "+b+" = true; break; }",d&&(r+="  }  "),r+=" if (!"+b+") {   ";var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var O=r;return r=E.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}});var li=Q((Eh,oi)=>{"use strict";oi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||"");if(e.opts.format===!1)return h&&(r+=" if (true) { "),r;var b=e.opts.$data&&i&&i.$data,d;b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i;var y=e.opts.unknownFormats,_=Array.isArray(y);if(b){var g="format"+n,E="isObject"+n,O="formatType"+n;r+=" var "+g+" = formats["+d+"]; var "+E+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+O+" = "+E+" && "+g+".type || 'string'; if ("+E+") { ",e.async&&(r+=" var async"+n+" = "+g+".async; "),r+=" "+g+" = "+g+".validate; } if (  ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),r+=" (",y!="ignore"&&(r+=" ("+d+" && !"+g+" ",_&&(r+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),r+=") || "),r+=" ("+g+" && "+O+" == '"+s+"' && !(typeof "+g+" == 'function' ? ",e.async?r+=" (async"+n+" ? await "+g+"("+m+") : "+g+"("+m+")) ":r+=" "+g+"("+m+") ",r+=" : "+g+".test("+m+"))))) {"}else{var g=e.formats[i];if(!g){if(y=="ignore")return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),h&&(r+=" if (true) { "),r;if(_&&y.indexOf(i)>=0)return h&&(r+=" if (true) { "),r;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var E=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,O=E&&g.type||"string";if(E){var S=g.async===!0;g=g.validate}if(O!=s)return h&&(r+=" if (true) { "),r;if(S){if(!e.async)throw new Error("async format in sync schema");var w="formats"+e.util.getProperty(i)+".validate";r+=" if (!(await "+w+"("+m+"))) { "}else{r+=" if (! ";var w="formats"+e.util.getProperty(i);E&&(w+=".validate"),typeof g=="function"?r+=" "+w+"("+m+") ":r+=" "+w+".test("+m+") ",r+=") { "}}var A=A||[];A.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",b?r+=""+d:r+=""+e.util.toQuotedString(i),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,b?r+="' + "+d+" + '":r+=""+e.util.escapeQuotes(i),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",b?r+="validate.schema"+c:r+=""+e.util.toQuotedString(i),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var I=r;return r=A.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}});var ui=Q((Sh,ci)=>{"use strict";ci.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d="errs__"+n,y=e.util.copy(e);y.level++;var _="valid"+y.level,g=e.schema.then,E=e.schema.else,O=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),S=E!==void 0&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all)),w=y.baseId;if(O||S){var A;y.createErrors=!1,y.schema=i,y.schemaPath=c,y.errSchemaPath=u,r+=" var "+d+" = errors; var "+b+" = true;  ";var I=e.compositeRule;e.compositeRule=y.compositeRule=!0,r+="  "+e.validate(y)+" ",y.baseId=w,y.createErrors=!0,r+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=I,O?(r+=" if ("+_+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(y)+" ",y.baseId=w,r+=" "+b+" = "+_+"; ",O&&S?(A="ifClause"+n,r+=" var "+A+" = 'then'; "):A="'then'",r+=" } ",S&&(r+=" else { ")):r+=" if (!"+_+") { ",S&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(y)+" ",y.baseId=w,r+=" "+b+" = "+_+"; ",O&&S?(A="ifClause"+n,r+=" var "+A+" = 'else'; "):A="'else'",r+=" } "),r+=" if (!"+b+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+A+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+A+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}});var fi=Q((Rh,di)=>{"use strict";di.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d="errs__"+n,y=e.util.copy(e),_="";y.level++;var g="valid"+y.level,E="i"+n,O=y.dataLevel=e.dataLevel+1,S="data"+O,w=e.baseId;if(r+="var "+d+" = errors;var "+b+";",Array.isArray(i)){var A=e.schema.additionalItems;if(A===!1){r+=" "+b+" = "+m+".length <= "+i.length+"; ";var I=u;u=e.errSchemaPath+"/additionalItems",r+="  if (!"+b+") {   ";var H=H||[];H.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+i.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var q=r;r=H.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+q+"]); ":r+=" validate.errors = ["+q+"]; return false; ":r+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=I,h&&(_+="}",r+=" else { ")}var k=i;if(k){for(var z,M=-1,L=k.length-1;M<L;)if(z=k[M+=1],e.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:e.util.schemaHasRules(z,e.RULES.all)){r+=" "+g+" = true; if ("+m+".length > "+M+") { ";var $=m+"["+M+"]";y.schema=z,y.schemaPath=c+"["+M+"]",y.errSchemaPath=u+"/"+M,y.errorPath=e.util.getPathExpr(e.errorPath,M,e.opts.jsonPointers,!0),y.dataPathArr[O]=M;var D=e.validate(y);y.baseId=w,e.util.varOccurences(D,S)<2?r+=" "+e.util.varReplace(D,S,$)+" ":r+=" var "+S+" = "+$+"; "+D+" ",r+=" }  ",h&&(r+=" if ("+g+") { ",_+="}")}}if(typeof A=="object"&&(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))){y.schema=A,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+g+" = true; if ("+m+".length > "+i.length+") {  for (var "+E+" = "+i.length+"; "+E+" < "+m+".length; "+E+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var $=m+"["+E+"]";y.dataPathArr[O]=E;var D=e.validate(y);y.baseId=w,e.util.varOccurences(D,S)<2?r+=" "+e.util.varReplace(D,S,$)+" ":r+=" var "+S+" = "+$+"; "+D+" ",h&&(r+=" if (!"+g+") break; "),r+=" } }  ",h&&(r+=" if ("+g+") { ",_+="}")}}else if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){y.schema=i,y.schemaPath=c,y.errSchemaPath=u,r+="  for (var "+E+" = 0; "+E+" < "+m+".length; "+E+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var $=m+"["+E+"]";y.dataPathArr[O]=E;var D=e.validate(y);y.baseId=w,e.util.varOccurences(D,S)<2?r+=" "+e.util.varReplace(D,S,$)+" ":r+=" var "+S+" = "+$+"; "+D+" ",h&&(r+=" if (!"+g+") break; "),r+=" }"}return h&&(r+=" "+_+" if ("+d+" == errors) {"),r}});var is=Q((wh,hi)=>{"use strict";hi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,w,m="data"+(o||""),b=e.opts.$data&&i&&i.$data,d;b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i;var y=t=="maximum",_=y?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[_],E=e.opts.$data&&g&&g.$data,O=y?"<":">",S=y?">":"<",w=void 0;if(!(b||typeof i=="number"||i===void 0))throw new Error(t+" must be number");if(!(E||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(_+" must be number or boolean");if(E){var A=e.util.getData(g.$data,o,e.dataPathArr),I="exclusive"+n,H="exclType"+n,q="exclIsNumber"+n,k="op"+n,z="' + "+k+" + '";r+=" var schemaExcl"+n+" = "+A+"; ",A="schemaExcl"+n,r+=" var "+I+"; var "+H+" = typeof "+A+"; if ("+H+" != 'boolean' && "+H+" != 'undefined' && "+H+" != 'number') { ";var w=_,M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(w||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+_+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var L=r;r=M.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" "+H+" == 'number' ? ( ("+I+" = "+d+" === undefined || "+A+" "+O+"= "+d+") ? "+m+" "+S+"= "+A+" : "+m+" "+S+" "+d+" ) : ( ("+I+" = "+A+" === true) ? "+m+" "+S+"= "+d+" : "+m+" "+S+" "+d+" ) || "+m+" !== "+m+") { var op"+n+" = "+I+" ? '"+O+"' : '"+O+"='; ",i===void 0&&(w=_,u=e.errSchemaPath+"/"+_,d=A,b=E)}else{var q=typeof g=="number",z=O;if(q&&b){var k="'"+z+"'";r+=" if ( ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" ( "+d+" === undefined || "+g+" "+O+"= "+d+" ? "+m+" "+S+"= "+g+" : "+m+" "+S+" "+d+" ) || "+m+" !== "+m+") { "}else{q&&i===void 0?(I=!0,w=_,u=e.errSchemaPath+"/"+_,d=g,S+="="):(q&&(d=Math[y?"min":"max"](g,i)),g===(q?d:!0)?(I=!0,w=_,u=e.errSchemaPath+"/"+_,S+="="):(I=!1,z+="="));var k="'"+z+"'";r+=" if ( ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" "+m+" "+S+" "+d+" || "+m+" !== "+m+") { "}}w=w||t;var M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(w||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+k+", limit: "+d+", exclusive: "+I+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+z+" ",b?r+="' + "+d:r+=""+d+"'"),e.opts.verbose&&(r+=" , schema:  ",b?r+="validate.schema"+c:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var L=r;return r=M.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}});var os=Q((Th,pi)=>{"use strict";pi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,_,m="data"+(o||""),b=e.opts.$data&&i&&i.$data,d;if(b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(b||typeof i=="number"))throw new Error(t+" must be number");var y=t=="maxItems"?">":"<";r+="if ( ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" "+m+".length "+y+" "+d+") { ";var _=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",b?r+="' + "+d+" + '":r+=""+i,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",b?r+="validate.schema"+c:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var E=r;return r=g.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var ls=Q(($h,mi)=>{"use strict";mi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,_,m="data"+(o||""),b=e.opts.$data&&i&&i.$data,d;if(b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(b||typeof i=="number"))throw new Error(t+" must be number");var y=t=="maxLength"?">":"<";r+="if ( ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),e.opts.unicode===!1?r+=" "+m+".length ":r+=" ucs2length("+m+") ",r+=" "+y+" "+d+") { ";var _=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",b?r+="' + "+d+" + '":r+=""+i,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",b?r+="validate.schema"+c:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var E=r;return r=g.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var cs=Q((Oh,vi)=>{"use strict";vi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,_,m="data"+(o||""),b=e.opts.$data&&i&&i.$data,d;if(b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(b||typeof i=="number"))throw new Error(t+" must be number");var y=t=="maxProperties"?">":"<";r+="if ( ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" Object.keys("+m+").length "+y+" "+d+") { ";var _=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+d+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",b?r+="' + "+d+" + '":r+=""+i,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",b?r+="validate.schema"+c:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var E=r;return r=g.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var yi=Q((Ah,gi)=>{"use strict";gi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b=e.opts.$data&&i&&i.$data,d;if(b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i,!(b||typeof i=="number"))throw new Error(t+" must be number");r+="var division"+n+";if (",b&&(r+=" "+d+" !== undefined && ( typeof "+d+" != 'number' || "),r+=" (division"+n+" = "+m+" / "+d+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+n+" !== parseInt(division"+n+") ",r+=" ) ",b&&(r+="  )  "),r+=" ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+d+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",b?r+="' + "+d:r+=""+d+"'"),e.opts.verbose&&(r+=" , schema:  ",b?r+="validate.schema"+c:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var _=r;return r=y.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var bi=Q((Ih,_i)=>{"use strict";_i.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="errs__"+n,d=e.util.copy(e);d.level++;var y="valid"+d.level;if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=c,d.errSchemaPath=u,r+=" var "+b+" = errors;  ";var _=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1;var g;d.opts.allErrors&&(g=d.opts.allErrors,d.opts.allErrors=!1),r+=" "+e.validate(d)+" ",d.createErrors=!0,g&&(d.opts.allErrors=g),e.compositeRule=d.compositeRule=_,r+=" if ("+y+") {   ";var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var O=r;r=E.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+b+"; if (vErrors !== null) { if ("+b+") vErrors.length = "+b+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ");return r}});var xi=Q((kh,Pi)=>{"use strict";Pi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d="errs__"+n,y=e.util.copy(e),_="";y.level++;var g="valid"+y.level,E=y.baseId,O="prevValid"+n,S="passingSchemas"+n;r+="var "+d+" = errors , "+O+" = false , "+b+" = false , "+S+" = null; ";var w=e.compositeRule;e.compositeRule=y.compositeRule=!0;var A=i;if(A)for(var I,H=-1,q=A.length-1;H<q;)I=A[H+=1],(e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all))?(y.schema=I,y.schemaPath=c+"["+H+"]",y.errSchemaPath=u+"/"+H,r+="  "+e.validate(y)+" ",y.baseId=E):r+=" var "+g+" = true; ",H&&(r+=" if ("+g+" && "+O+") { "+b+" = false; "+S+" = ["+S+", "+H+"]; } else { ",_+="}"),r+=" if ("+g+") { "+b+" = "+O+" = true; "+S+" = "+H+"; }";return e.compositeRule=y.compositeRule=w,r+=""+_+"if (!"+b+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+S+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var Si=Q((Dh,Ei)=>{"use strict";Ei.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b=e.opts.$data&&i&&i.$data,d;b?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+n):d=i;var y=b?"(new RegExp("+d+"))":e.usePattern(i);r+="if ( ",b&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),r+=" !"+y+".test("+m+") ) {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",b?r+=""+d:r+=""+e.util.toQuotedString(i),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,b?r+="' + "+d+" + '":r+=""+e.util.escapeQuotes(i),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",b?r+="validate.schema"+c:r+=""+e.util.toQuotedString(i),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var g=r;return r=_.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var wi=Q((Ch,Ri)=>{"use strict";Ri.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="errs__"+n,d=e.util.copy(e),y="";d.level++;var _="valid"+d.level,g="key"+n,E="idx"+n,O=d.dataLevel=e.dataLevel+1,S="data"+O,w="dataProperties"+n,A=Object.keys(i||{}).filter(re),I=e.schema.patternProperties||{},H=Object.keys(I).filter(re),q=e.schema.additionalProperties,k=A.length||H.length,z=q===!1,M=typeof q=="object"&&Object.keys(q).length,L=e.opts.removeAdditional,$=z||M||L,D=e.opts.ownProperties,F=e.baseId,le=e.schema.required;if(le&&!(e.opts.$data&&le.$data)&&le.length<e.opts.loopRequired)var X=e.util.toHash(le);function re(Ke){return Ke!=="__proto__"}if(r+="var "+b+" = errors;var "+_+" = true;",D&&(r+=" var "+w+" = undefined;"),$){if(D?r+=" "+w+" = "+w+" || Object.keys("+m+"); for (var "+E+"=0; "+E+"<"+w+".length; "+E+"++) { var "+g+" = "+w+"["+E+"]; ":r+=" for (var "+g+" in "+m+") { ",k){if(r+=" var isAdditional"+n+" = !(false ",A.length)if(A.length>8)r+=" || validate.schema"+c+".hasOwnProperty("+g+") ";else{var W=A;if(W)for(var U,ge=-1,Te=W.length-1;ge<Te;)U=W[ge+=1],r+=" || "+g+" == "+e.util.toQuotedString(U)+" "}if(H.length){var Ae=H;if(Ae)for(var se,be=-1,Se=Ae.length-1;be<Se;)se=Ae[be+=1],r+=" || "+e.usePattern(se)+".test("+g+") "}r+=" ); if (isAdditional"+n+") { "}if(L=="all")r+=" delete "+m+"["+g+"]; ";else{var Ie=e.errorPath,mr="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),z)if(L)r+=" delete "+m+"["+g+"]; ";else{r+=" "+_+" = false; ";var ir=u;u=e.errSchemaPath+"/additionalProperties";var Pe=Pe||[];Pe.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+mr+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var ye=r;r=Pe.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+ye+"]); ":r+=" validate.errors = ["+ye+"]; return false; ":r+=" var err = "+ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ir,h&&(r+=" break; ")}else if(M)if(L=="failing"){r+=" var "+b+" = errors;  ";var Sr=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=q,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var $e=m+"["+g+"]";d.dataPathArr[O]=g;var ie=e.validate(d);d.baseId=F,e.util.varOccurences(ie,S)<2?r+=" "+e.util.varReplace(ie,S,$e)+" ":r+=" var "+S+" = "+$e+"; "+ie+" ",r+=" if (!"+_+") { errors = "+b+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+g+"]; }  ",e.compositeRule=d.compositeRule=Sr}else{d.schema=q,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var $e=m+"["+g+"]";d.dataPathArr[O]=g;var ie=e.validate(d);d.baseId=F,e.util.varOccurences(ie,S)<2?r+=" "+e.util.varReplace(ie,S,$e)+" ":r+=" var "+S+" = "+$e+"; "+ie+" ",h&&(r+=" if (!"+_+") break; ")}e.errorPath=Ie}k&&(r+=" } "),r+=" }  ",h&&(r+=" if ("+_+") { ",y+="}")}var vr=e.opts.useDefaults&&!e.compositeRule;if(A.length){var or=A;if(or)for(var U,Rr=-1,wr=or.length-1;Rr<wr;){U=or[Rr+=1];var Re=i[U];if(e.opts.strictKeywords?typeof Re=="object"&&Object.keys(Re).length>0||Re===!1:e.util.schemaHasRules(Re,e.RULES.all)){var ze=e.util.getProperty(U),$e=m+ze,Ce=vr&&Re.default!==void 0;d.schema=Re,d.schemaPath=c+ze,d.errSchemaPath=u+"/"+e.util.escapeFragment(U),d.errorPath=e.util.getPath(e.errorPath,U,e.opts.jsonPointers),d.dataPathArr[O]=e.util.toQuotedString(U);var ie=e.validate(d);if(d.baseId=F,e.util.varOccurences(ie,S)<2){ie=e.util.varReplace(ie,S,$e);var ke=$e}else{var ke=S;r+=" var "+S+" = "+$e+"; "}if(Ce)r+=" "+ie+" ";else{if(X&&X[U]){r+=" if ( "+ke+" === undefined ",D&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),r+=") { "+_+" = false; ";var Ie=e.errorPath,ir=u,Ye=e.util.escapeQuotes(U);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Ie,U,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var Pe=Pe||[];Pe.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Ye+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Ye+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var ye=r;r=Pe.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+ye+"]); ":r+=" validate.errors = ["+ye+"]; return false; ":r+=" var err = "+ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ir,e.errorPath=Ie,r+=" } else { "}else h?(r+=" if ( "+ke+" === undefined ",D&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),r+=") { "+_+" = true; } else { "):(r+=" if ("+ke+" !== undefined ",D&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(U)+"') "),r+=" ) { ");r+=" "+ie+" } "}}h&&(r+=" if ("+_+") { ",y+="}")}}if(H.length){var Fe=H;if(Fe)for(var se,wt=-1,Sa=Fe.length-1;wt<Sa;){se=Fe[wt+=1];var Re=I[se];if(e.opts.strictKeywords?typeof Re=="object"&&Object.keys(Re).length>0||Re===!1:e.util.schemaHasRules(Re,e.RULES.all)){d.schema=Re,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),D?r+=" "+w+" = "+w+" || Object.keys("+m+"); for (var "+E+"=0; "+E+"<"+w+".length; "+E+"++) { var "+g+" = "+w+"["+E+"]; ":r+=" for (var "+g+" in "+m+") { ",r+=" if ("+e.usePattern(se)+".test("+g+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var $e=m+"["+g+"]";d.dataPathArr[O]=g;var ie=e.validate(d);d.baseId=F,e.util.varOccurences(ie,S)<2?r+=" "+e.util.varReplace(ie,S,$e)+" ":r+=" var "+S+" = "+$e+"; "+ie+" ",h&&(r+=" if (!"+_+") break; "),r+=" } ",h&&(r+=" else "+_+" = true; "),r+=" }  ",h&&(r+=" if ("+_+") { ",y+="}")}}}return h&&(r+=" "+y+" if ("+b+" == errors) {"),r}});var $i=Q((jh,Ti)=>{"use strict";Ti.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="errs__"+n,d=e.util.copy(e),y="";d.level++;var _="valid"+d.level;if(r+="var "+b+" = errors;",e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=c,d.errSchemaPath=u;var g="key"+n,E="idx"+n,O="i"+n,S="' + "+g+" + '",w=d.dataLevel=e.dataLevel+1,A="data"+w,I="dataProperties"+n,H=e.opts.ownProperties,q=e.baseId;H&&(r+=" var "+I+" = undefined; "),H?r+=" "+I+" = "+I+" || Object.keys("+m+"); for (var "+E+"=0; "+E+"<"+I+".length; "+E+"++) { var "+g+" = "+I+"["+E+"]; ":r+=" for (var "+g+" in "+m+") { ",r+=" var startErrs"+n+" = errors; ";var k=g,z=e.compositeRule;e.compositeRule=d.compositeRule=!0;var M=e.validate(d);d.baseId=q,e.util.varOccurences(M,A)<2?r+=" "+e.util.varReplace(M,A,k)+" ":r+=" var "+A+" = "+k+"; "+M+" ",e.compositeRule=d.compositeRule=z,r+=" if (!"+_+") { for (var "+O+"=startErrs"+n+"; "+O+"<errors; "+O+"++) { vErrors["+O+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+S+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+S+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),h&&(r+=" break; "),r+=" } }"}return h&&(r+=" "+y+" if ("+b+" == errors) {"),r}});var Ai=Q((Nh,Oi)=>{"use strict";Oi.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d=e.opts.$data&&i&&i.$data,y;d?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i;var _="schema"+n;if(!d)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var g=[],E=i;if(E)for(var O,S=-1,w=E.length-1;S<w;){O=E[S+=1];var A=e.schema.properties[O];A&&(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))||(g[g.length]=O)}}else var g=i;if(d||g.length){var I=e.errorPath,H=d||g.length>=e.opts.loopRequired,q=e.opts.ownProperties;if(h)if(r+=" var missing"+n+"; ",H){d||(r+=" var "+_+" = validate.schema"+c+"; ");var k="i"+n,z="schema"+n+"["+k+"]",M="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(I,z,e.opts.jsonPointers)),r+=" var "+b+" = true; ",d&&(r+=" if (schema"+n+" === undefined) "+b+" = true; else if (!Array.isArray(schema"+n+")) "+b+" = false; else {"),r+=" for (var "+k+" = 0; "+k+" < "+_+".length; "+k+"++) { "+b+" = "+m+"["+_+"["+k+"]] !== undefined ",q&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+_+"["+k+"]) "),r+="; if (!"+b+") break; } ",d&&(r+="  }  "),r+="  if (!"+b+") {   ";var L=L||[];L.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var $=r;r=L.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var D=g;if(D)for(var F,k=-1,le=D.length-1;k<le;){F=D[k+=1],k&&(r+=" || ");var X=e.util.getProperty(F),re=m+X;r+=" ( ( "+re+" === undefined ",q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:X)+") ) "}r+=") {  ";var z="missing"+n,M="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(I,z,!0):I+" + "+z);var L=L||[];L.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var $=r;r=L.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(H){d||(r+=" var "+_+" = validate.schema"+c+"; ");var k="i"+n,z="schema"+n+"["+k+"]",M="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(I,z,e.opts.jsonPointers)),d&&(r+=" if ("+_+" && !Array.isArray("+_+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+_+" !== undefined) { "),r+=" for (var "+k+" = 0; "+k+" < "+_+".length; "+k+"++) { if ("+m+"["+_+"["+k+"]] === undefined ",q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+_+"["+k+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(r+="  }  ")}else{var W=g;if(W)for(var F,U=-1,ge=W.length-1;U<ge;){F=W[U+=1];var X=e.util.getProperty(F),M=e.util.escapeQuotes(F),re=m+X;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(I,F,e.opts.jsonPointers)),r+=" if ( "+re+" === undefined ",q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=I}else h&&(r+=" if (true) {");return r}});var ki=Q((Lh,Ii)=>{"use strict";Ii.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(o||""),b="valid"+n,d=e.opts.$data&&i&&i.$data,y;if(d?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",y="schema"+n):y=i,(i||d)&&e.opts.uniqueItems!==!1){d&&(r+=" var "+b+"; if ("+y+" === false || "+y+" === undefined) "+b+" = true; else if (typeof "+y+" != 'boolean') "+b+" = false; else { "),r+=" var i = "+m+".length , "+b+" = true , j; if (i > 1) { ";var _=e.schema.items&&e.schema.items.type,g=Array.isArray(_);if(!_||_=="object"||_=="array"||g&&(_.indexOf("object")>=0||_.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+b+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var E="checkDataType"+(g?"s":"");r+=" if ("+e.util[E](_,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+b+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",d&&(r+="  }  "),r+=" if (!"+b+") {   ";var O=O||[];O.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+c:r+=""+i,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var S=r;r=O.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}});var Ci=Q((Fh,Di)=>{"use strict";Di.exports={$ref:Bn(),allOf:Jn(),anyOf:Gn(),$comment:Xn(),const:ei(),contains:ti(),dependencies:si(),enum:ii(),format:li(),if:ui(),items:fi(),maximum:is(),minimum:is(),maxItems:os(),minItems:os(),maxLength:ls(),minLength:ls(),maxProperties:cs(),minProperties:cs(),multipleOf:yi(),not:bi(),oneOf:xi(),pattern:Si(),properties:wi(),propertyNames:$i(),required:Ai(),uniqueItems:ki(),validate:ss()}});var Li=Q((Mh,Ni)=>{"use strict";var ji=Ci(),us=Br().toHash;Ni.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=us(t),e.types=us(r),e.forEach(function(n){n.rules=n.rules.map(function(o){var i;if(typeof o=="object"){var c=Object.keys(o)[0];i=o[c],o=c,i.forEach(function(h){t.push(h),e.all[h]=!0})}t.push(o);var u=e.all[o]={keyword:o,code:ji[o],implements:i};return u}),e.all.$comment={keyword:"$comment",code:ji.$comment},n.type&&(e.types[n.type]=n)}),e.keywords=us(t.concat(s)),e.custom={},e}});var qi=Q((qh,Mi)=>{"use strict";var Fi=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Mi.exports=function(a,e){for(var t=0;t<e.length;t++){a=JSON.parse(JSON.stringify(a));var s=e[t].split("/"),r=a,n;for(n=1;n<s.length;n++)r=r[s[n]];for(n=0;n<Fi.length;n++){var o=Fi[n],i=r[o];i&&(r[o]={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var Hi=Q((zh,Vi)=>{"use strict";var pd=oa().MissingRef;Vi.exports=zi;function zi(a,e,t){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=n(a).then(function(){var i=s._addSchema(a,void 0,e);return i.validate||o(i)});return t&&r.then(function(i){t(null,i)},t),r;function n(i){var c=i.$schema;return c&&!s.getSchema(c)?zi.call(s,{$ref:c},!0):Promise.resolve()}function o(i){try{return s._compile(i)}catch(u){if(u instanceof pd)return c(u);throw u}function c(u){var h=u.missingSchema;if(d(h))throw new Error("Schema "+h+" is loaded but "+u.missingRef+" cannot be resolved");var m=s._loadingSchemas[h];return m||(m=s._loadingSchemas[h]=s._opts.loadSchema(h),m.then(b,b)),m.then(function(y){if(!d(h))return n(y).then(function(){d(h)||s.addSchema(y,h,void 0,e)})}).then(function(){return o(i)});function b(){delete s._loadingSchemas[h]}function d(y){return s._refs[y]||s._schemas[y]}}}}});var Zi=Q((Vh,Ui)=>{"use strict";Ui.exports=function(e,t,s){var r=" ",n=e.level,o=e.dataLevel,i=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m,b="data"+(o||""),d="valid"+n,y="errs__"+n,_=e.opts.$data&&i&&i.$data,g;_?(r+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",g="schema"+n):g=i;var E=this,O="definition"+n,S=E.definition,w="",A,I,H,q,k;if(_&&S.$data){k="keywordValidate"+n;var z=S.validateSchema;r+=" var "+O+" = RULES.custom['"+t+"'].definition; var "+k+" = "+O+".validate;"}else{if(q=e.useCustomRule(E,i,e.schema,e),!q)return;g="validate.schema"+c,k=q.code,A=S.compile,I=S.inline,H=S.macro}var M=k+".errors",L="i"+n,$="ruleErr"+n,D=S.async;if(D&&!e.async)throw new Error("async keyword in sync schema");if(I||H||(r+=""+M+" = null;"),r+="var "+y+" = errors;var "+d+";",_&&S.$data&&(w+="}",r+=" if ("+g+" === undefined) { "+d+" = true; } else { ",z&&(w+="}",r+=" "+d+" = "+O+".validateSchema("+g+"); if ("+d+") { ")),I)S.statements?r+=" "+q.validate+" ":r+=" "+d+" = "+q.validate+"; ";else if(H){var F=e.util.copy(e),w="";F.level++;var le="valid"+F.level;F.schema=q.validate,F.schemaPath="";var X=e.compositeRule;e.compositeRule=F.compositeRule=!0;var re=e.validate(F).replace(/validate\.schema/g,k);e.compositeRule=F.compositeRule=X,r+=" "+re}else{var W=W||[];W.push(r),r="",r+="  "+k+".call( ",e.opts.passContext?r+="this":r+="self",A||S.schema===!1?r+=" , "+b+" ":r+=" , "+g+" , "+b+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var U=o?"data"+(o-1||""):"parentData",ge=o?e.dataPathArr[o]:"parentDataProperty";r+=" , "+U+" , "+ge+" , rootData )  ";var Te=r;r=W.pop(),S.errors===!1?(r+=" "+d+" = ",D&&(r+="await "),r+=""+Te+"; "):D?(M="customErrors"+n,r+=" var "+M+" = null; try { "+d+" = await "+Te+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+M+" = e.errors; else throw e; } "):r+=" "+M+" = null; "+d+" = "+Te+"; "}if(S.modifying&&(r+=" if ("+U+") "+b+" = "+U+"["+ge+"];"),r+=""+w,S.valid)h&&(r+=" if (true) { ");else{r+=" if ( ",S.valid===void 0?(r+=" !",H?r+=""+le:r+=""+d):r+=" "+!S.valid+" ",r+=") { ",m=E.keyword;var W=W||[];W.push(r),r="";var W=W||[];W.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),r+=" } "):r+=" {} ";var Ae=r;r=W.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+Ae+"]); ":r+=" validate.errors = ["+Ae+"]; return false; ":r+=" var err = "+Ae+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var se=r;r=W.pop(),I?S.errors?S.errors!="full"&&(r+="  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+$+" = vErrors["+L+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+b+"; "),r+=" } "):S.errors===!1?r+=" "+se+" ":(r+=" if ("+y+" == errors) { "+se+" } else {  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+$+" = vErrors["+L+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+b+"; "),r+=" } } "):H?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):S.errors===!1?r+=" "+se+" ":(r+=" if (Array.isArray("+M+")) { if (vErrors === null) vErrors = "+M+"; else vErrors = vErrors.concat("+M+"); errors = vErrors.length;  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+$+" = vErrors["+L+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+";  "+$+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+b+"; "),r+=" } } else { "+se+" } "),r+=" } ",h&&(r+=" else { ")}return r}});var ds=Q((Hh,md)=>{md.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Ji=Q((Uh,Qi)=>{"use strict";var Bi=ds();Qi.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Bi.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Bi.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var Gi=Q((Zh,Ki)=>{"use strict";var vd=/^[a-z_$][a-z0-9_$-]*$/i,gd=Zi(),yd=Ji();Ki.exports={add:_d,get:bd,remove:Pd,validate:fs};function _d(a,e){var t=this.RULES;if(t.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!vd.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var r=0;r<s.length;r++)o(a,s[r],e);else o(a,s,e);var n=e.metaSchema;n&&(e.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(n,!0))}t.keywords[a]=t.all[a]=!0;function o(i,c,u){for(var h,m=0;m<t.length;m++){var b=t[m];if(b.type==c){h=b;break}}h||(h={type:c,rules:[]},t.push(h));var d={keyword:i,definition:u,custom:!0,code:gd,implements:u.implements};h.rules.push(d),t.custom[i]=d}return this}function bd(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Pd(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var t=0;t<e.length;t++)for(var s=e[t].rules,r=0;r<s.length;r++)if(s[r].keyword==a){s.splice(r,1);break}return this}function fs(a,e){fs.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(yd,!0);if(t(a))return!0;if(fs.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var Wi=Q((Bh,xd)=>{xd.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var oo=Q((Qh,io)=>{"use strict";var Yi=An(),Qr=ia(),Ed=kn(),eo=Wa(),Sd=as(),Rd=Un(),wd=Li(),ro=qi(),to=Br();io.exports=_e;_e.prototype.validate=$d;_e.prototype.compile=Od;_e.prototype.addSchema=Ad;_e.prototype.addMetaSchema=Id;_e.prototype.validateSchema=kd;_e.prototype.getSchema=Cd;_e.prototype.removeSchema=Nd;_e.prototype.addFormat=Ud;_e.prototype.errorsText=Hd;_e.prototype._addSchema=Ld;_e.prototype._compile=Fd;_e.prototype.compileAsync=Hi();var ma=Gi();_e.prototype.addKeyword=ma.add;_e.prototype.getKeyword=ma.get;_e.prototype.removeKeyword=ma.remove;_e.prototype.validateKeyword=ma.validate;var ao=oa();_e.ValidationError=ao.Validation;_e.MissingRefError=ao.MissingRef;_e.$dataMetaSchema=ro;var pa="http://json-schema.org/draft-07/schema",Xi=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Td=["/properties"];function _e(a){if(!(this instanceof _e))return new _e(a);a=this._opts=to.copy(a)||{},Gd(this),this._schemas={},this._refs={},this._fragments={},this._formats=Rd(a.format),this._cache=a.cache||new Ed,this._loadingSchemas={},this._compilations=[],this.RULES=wd(),this._getId=Md(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=Sd),this._metaOpts=Kd(this),a.formats&&Qd(this),a.keywords&&Jd(this),Zd(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Bd(this)}function $d(a,e){var t;if(typeof a=="string"){if(t=this.getSchema(a),!t)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);t=s.validate||this._compile(s)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function Od(a,e){var t=this._addSchema(a,void 0,e);return t.validate||this._compile(t)}function Ad(a,e,t,s){if(Array.isArray(a)){for(var r=0;r<a.length;r++)this.addSchema(a[r],void 0,t,s);return this}var n=this._getId(a);if(n!==void 0&&typeof n!="string")throw new Error("schema id must be string");return e=Qr.normalizeId(e||n),no(this,e),this._schemas[e]=this._addSchema(a,t,s,!0),this}function Id(a,e,t){return this.addSchema(a,e,t,!0),this}function kd(a,e){var t=a.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||Dd(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(t,a);if(!s&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return s}function Dd(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(pa)?pa:void 0,a._opts.defaultMeta}function Cd(a){var e=so(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return jd(this,a)}}function jd(a,e){var t=Qr.schema.call(a,{schema:{}},e);if(t){var s=t.schema,r=t.root,n=t.baseId,o=Yi.call(a,s,r,void 0,n);return a._fragments[e]=new eo({ref:e,fragment:!0,schema:s,root:r,baseId:n,validate:o}),o}}function so(a,e){return e=Qr.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function Nd(a){if(a instanceof RegExp)return ha(this,this._schemas,a),ha(this,this._refs,a),this;switch(typeof a){case"undefined":return ha(this,this._schemas),ha(this,this._refs),this._cache.clear(),this;case"string":var e=so(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var t=this._opts.serialize,s=t?t(a):a;this._cache.del(s);var r=this._getId(a);r&&(r=Qr.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function ha(a,e,t){for(var s in e){var r=e[s];!r.meta&&(!t||t.test(s))&&(a._cache.del(r.cacheKey),delete e[s])}}function Ld(a,e,t,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,n=r?r(a):a,o=this._cache.get(n);if(o)return o;s=s||this._opts.addUsedSchema!==!1;var i=Qr.normalizeId(this._getId(a));i&&s&&no(this,i);var c=this._opts.validateSchema!==!1&&!e,u;c&&!(u=i&&i==Qr.normalizeId(a.$schema))&&this.validateSchema(a,!0);var h=Qr.ids.call(this,a),m=new eo({id:i,schema:a,localRefs:h,cacheKey:n,meta:t});return i[0]!="#"&&s&&(this._refs[i]=m),this._cache.put(n,m),c&&u&&this.validateSchema(a,!0),m}function Fd(a,e){if(a.compiling)return a.validate=r,r.schema=a.schema,r.errors=null,r.root=e||r,a.schema.$async===!0&&(r.$async=!0),r;a.compiling=!0;var t;a.meta&&(t=this._opts,this._opts=this._metaOpts);var s;try{s=Yi.call(this,a.schema,e,a.localRefs)}catch(n){throw delete a.validate,n}finally{a.compiling=!1,a.meta&&(this._opts=t)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function r(){var n=a.validate,o=n.apply(this,arguments);return r.errors=n.errors,o}}function Md(a){switch(a.schemaId){case"auto":return Vd;case"id":return qd;default:return zd}}function qd(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function zd(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function Vd(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function Hd(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,r="",n=0;n<a.length;n++){var o=a[n];o&&(r+=s+o.dataPath+" "+o.message+t)}return r.slice(0,-t.length)}function Ud(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Zd(a){var e;if(a._opts.$data&&(e=Wi(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var t=ds();a._opts.$data&&(t=ro(t,Td)),a.addMetaSchema(t,pa,!0),a._refs["http://json-schema.org/schema"]=pa}}function Bd(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var t in e)a.addSchema(e[t],t)}function Qd(a){for(var e in a._opts.formats){var t=a._opts.formats[e];a.addFormat(e,t)}}function Jd(a){for(var e in a._opts.keywords){var t=a._opts.keywords[e];a.addKeyword(e,t)}}function no(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Kd(a){for(var e=to.copy(a._opts),t=0;t<Xi.length;t++)delete e[Xi[t]];return e}function Gd(a){var e=a._opts.logger;if(e===!1)a.logger={log:hs,warn:hs,error:hs};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function hs(){}});var l={};vl(l,{BRAND:()=>Ul,DIRTY:()=>Ar,EMPTY_PATH:()=>xl,INVALID:()=>Z,NEVER:()=>$c,OK:()=>Oe,ParseStatus:()=>we,Schema:()=>K,ZodAny:()=>_r,ZodArray:()=>pr,ZodBigInt:()=>kr,ZodBoolean:()=>Dr,ZodBranded:()=>yt,ZodCatch:()=>Ur,ZodDate:()=>Cr,ZodDefault:()=>Hr,ZodDiscriminatedUnion:()=>kt,ZodEffects:()=>Be,ZodEnum:()=>zr,ZodError:()=>je,ZodFirstPartyTypeKind:()=>T,ZodFunction:()=>Ct,ZodIntersection:()=>Fr,ZodIssueCode:()=>R,ZodLazy:()=>Mr,ZodLiteral:()=>qr,ZodMap:()=>it,ZodNaN:()=>lt,ZodNativeEnum:()=>Vr,ZodNever:()=>Ge,ZodNull:()=>Nr,ZodNullable:()=>sr,ZodNumber:()=>Ir,ZodObject:()=>Ne,ZodOptional:()=>Ue,ZodParsedType:()=>j,ZodPipeline:()=>_t,ZodPromise:()=>br,ZodReadonly:()=>Zr,ZodRecord:()=>Dt,ZodSchema:()=>K,ZodSet:()=>ot,ZodString:()=>yr,ZodSymbol:()=>st,ZodTransformer:()=>Be,ZodTuple:()=>ar,ZodType:()=>K,ZodUndefined:()=>jr,ZodUnion:()=>Lr,ZodUnknown:()=>hr,ZodVoid:()=>nt,addIssueToContext:()=>C,any:()=>Yl,array:()=>ac,bigint:()=>Jl,boolean:()=>zs,coerce:()=>Tc,custom:()=>Fs,date:()=>Kl,datetimeRegex:()=>Ns,defaultErrorMap:()=>dr,discriminatedUnion:()=>oc,effect:()=>_c,enum:()=>vc,function:()=>hc,getErrorMap:()=>rt,getParsedType:()=>tr,instanceof:()=>Bl,intersection:()=>lc,isAborted:()=>At,isAsync:()=>tt,isDirty:()=>It,isValid:()=>gr,late:()=>Zl,lazy:()=>pc,literal:()=>mc,makeIssue:()=>gt,map:()=>dc,nan:()=>Ql,nativeEnum:()=>gc,never:()=>rc,null:()=>Xl,nullable:()=>Pc,number:()=>qs,object:()=>sc,objectUtil:()=>Oa,oboolean:()=>wc,onumber:()=>Rc,optional:()=>bc,ostring:()=>Sc,pipeline:()=>Ec,preprocess:()=>xc,promise:()=>yc,quotelessJson:()=>_l,record:()=>uc,set:()=>fc,setErrorMap:()=>Pl,strictObject:()=>nc,string:()=>Ms,symbol:()=>Gl,transformer:()=>_c,tuple:()=>cc,undefined:()=>Wl,union:()=>ic,unknown:()=>ec,util:()=>Y,void:()=>tc});var Y;(function(a){a.assertEqual=r=>{};function e(r){}a.assertIs=e;function t(r){throw new Error}a.assertNever=t,a.arrayToEnum=r=>{let n={};for(let o of r)n[o]=o;return n},a.getValidEnumValues=r=>{let n=a.objectKeys(r).filter(i=>typeof r[r[i]]!="number"),o={};for(let i of n)o[i]=r[i];return a.objectValues(o)},a.objectValues=r=>a.objectKeys(r).map(function(n){return r[n]}),a.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let n=[];for(let o in r)Object.prototype.hasOwnProperty.call(r,o)&&n.push(o);return n},a.find=(r,n)=>{for(let o of r)if(n(o))return o},a.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,n=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(n)}a.joinValues=s,a.jsonStringifyReplacer=(r,n)=>typeof n=="bigint"?n.toString():n})(Y||(Y={}));var Oa;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(Oa||(Oa={}));var j=Y.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tr=a=>{switch(typeof a){case"undefined":return j.undefined;case"string":return j.string;case"number":return Number.isNaN(a)?j.nan:j.number;case"boolean":return j.boolean;case"function":return j.function;case"bigint":return j.bigint;case"symbol":return j.symbol;case"object":return Array.isArray(a)?j.array:a===null?j.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?j.promise:typeof Map<"u"&&a instanceof Map?j.map:typeof Set<"u"&&a instanceof Set?j.set:typeof Date<"u"&&a instanceof Date?j.date:j.object;default:return j.unknown}};var R=Y.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_l=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:"),je=class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(n){return n.message},s={_errors:[]},r=n=>{for(let o of n.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)s._errors.push(t(o));else{let i=s,c=0;for(;c<o.path.length;){let u=o.path[c];c===o.path.length-1?(i[u]=i[u]||{_errors:[]},i[u]._errors.push(t(o))):i[u]=i[u]||{_errors:[]},i=i[u],c++}}};return r(this),s}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Y.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},s=[];for(let r of this.issues)if(r.path.length>0){let n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}};je.create=a=>new je(a);var bl=(a,e)=>{let t;switch(a.code){case R.invalid_type:a.received===j.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case R.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,Y.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:t=`Unrecognized key(s) in object: ${Y.joinValues(a.keys,", ")}`;break;case R.invalid_union:t="Invalid input";break;case R.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Y.joinValues(a.options)}`;break;case R.invalid_enum_value:t=`Invalid enum value. Expected ${Y.joinValues(a.options)}, received '${a.received}'`;break;case R.invalid_arguments:t="Invalid function arguments";break;case R.invalid_return_type:t="Invalid function return type";break;case R.invalid_date:t="Invalid date";break;case R.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:Y.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case R.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case R.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case R.custom:t="Invalid input";break;case R.invalid_intersection_types:t="Intersection results could not be merged";break;case R.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case R.not_finite:t="Number must be finite";break;default:t=e.defaultError,Y.assertNever(a)}return{message:t}},dr=bl;var Is=dr;function Pl(a){Is=a}function rt(){return Is}var gt=a=>{let{data:e,path:t,errorMaps:s,issueData:r}=a,n=[...t,...r.path||[]],o={...r,path:n};if(r.message!==void 0)return{...r,path:n,message:r.message};let i="",c=s.filter(u=>!!u).slice().reverse();for(let u of c)i=u(o,{data:e,defaultError:i}).message;return{...r,path:n,message:i}},xl=[];function C(a,e){let t=rt(),s=gt({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,t,t===dr?void 0:dr].filter(r=>!!r)});a.common.issues.push(s)}var we=class a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let r of t){if(r.status==="aborted")return Z;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let r of t){let n=await r.key,o=await r.value;s.push({key:n,value:o})}return a.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let r of t){let{key:n,value:o}=r;if(n.status==="aborted"||o.status==="aborted")return Z;n.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(s[n.value]=o.value)}return{status:e.value,value:s}}},Z=Object.freeze({status:"aborted"}),Ar=a=>({status:"dirty",value:a}),Oe=a=>({status:"valid",value:a}),At=a=>a.status==="aborted",It=a=>a.status==="dirty",gr=a=>a.status==="valid",tt=a=>typeof Promise<"u"&&a instanceof Promise;var V;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(V||(V={}));var Ze=class{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ks=(a,e)=>{if(gr(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new je(a.common.issues);return this._error=t,this._error}}};function J(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,i)=>{let{message:c}=a;return o.code==="invalid_enum_value"?{message:c??i.defaultError}:typeof i.data>"u"?{message:c??s??i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:c??t??i.defaultError}},description:r}}var K=class{get description(){return this._def.description}_getType(e){return tr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new we,ctx:{common:e.parent.common,data:e.data,parsedType:tr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(tt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){let s={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tr(e)},r=this._parseSync({data:e,path:s.path,parent:s});return ks(s,r)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tr(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:t});return gr(s)?{value:s.value}:{issues:t.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>gr(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){let s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){let s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tr(e)},r=this._parse({data:e,path:s.path,parent:s}),n=await(tt(r)?r:Promise.resolve(r));return ks(s,n)}refine(e,t){let s=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,n)=>{let o=e(r),i=()=>n.addIssue({code:R.custom,...s(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(i(),!1)):o?!0:(i(),!1)})}refinement(e,t){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof t=="function"?t(s,r):t),!1))}_refinement(e){return new Be({schema:this,typeName:T.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ue.create(this,this._def)}nullable(){return sr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return pr.create(this)}promise(){return br.create(this,this._def)}or(e){return Lr.create([this,e],this._def)}and(e){return Fr.create(this,e,this._def)}transform(e){return new Be({...J(this._def),schema:this,typeName:T.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Hr({...J(this._def),innerType:this,defaultValue:t,typeName:T.ZodDefault})}brand(){return new yt({typeName:T.ZodBranded,type:this,...J(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Ur({...J(this._def),innerType:this,catchValue:t,typeName:T.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return _t.create(this,e)}readonly(){return Zr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},El=/^c[^\s-]{8,}$/i,Sl=/^[0-9a-z]+$/,Rl=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wl=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Tl=/^[a-z0-9_-]{21}$/i,$l=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ol=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Al=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Il="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Aa,kl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Dl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Cl=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jl=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Nl=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ll=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Cs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Fl=new RegExp(`^${Cs}$`);function js(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let t=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Ml(a){return new RegExp(`^${js(a)}$`)}function Ns(a){let e=`${Cs}T${js(a)}`,t=[];return t.push(a.local?"Z?":"Z"),a.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ql(a,e){return!!((e==="v4"||!e)&&kl.test(a)||(e==="v6"||!e)&&Cl.test(a))}function zl(a,e){if(!$l.test(a))return!1;try{let[t]=a.split(".");if(!t)return!1;let s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function Vl(a,e){return!!((e==="v4"||!e)&&Dl.test(a)||(e==="v6"||!e)&&jl.test(a))}var yr=class a extends K{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==j.string){let n=this._getOrReturnCtx(e);return C(n,{code:R.invalid_type,expected:j.string,received:n.parsedType}),Z}let s=new we,r;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),C(r,{code:R.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="max")e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),C(r,{code:R.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="length"){let o=e.data.length>n.value,i=e.data.length<n.value;(o||i)&&(r=this._getOrReturnCtx(e,r),o?C(r,{code:R.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):i&&C(r,{code:R.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),s.dirty())}else if(n.kind==="email")Al.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"email",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="emoji")Aa||(Aa=new RegExp(Il,"u")),Aa.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"emoji",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="uuid")wl.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"uuid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="nanoid")Tl.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"nanoid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid")El.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"cuid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid2")Sl.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"cuid2",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="ulid")Rl.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"ulid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),C(r,{validation:"url",code:R.invalid_string,message:n.message}),s.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"regex",code:R.invalid_string,message:n.message}),s.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),C(r,{code:R.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),s.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),C(r,{code:R.invalid_string,validation:{startsWith:n.value},message:n.message}),s.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),C(r,{code:R.invalid_string,validation:{endsWith:n.value},message:n.message}),s.dirty()):n.kind==="datetime"?Ns(n).test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{code:R.invalid_string,validation:"datetime",message:n.message}),s.dirty()):n.kind==="date"?Fl.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{code:R.invalid_string,validation:"date",message:n.message}),s.dirty()):n.kind==="time"?Ml(n).test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{code:R.invalid_string,validation:"time",message:n.message}),s.dirty()):n.kind==="duration"?Ol.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"duration",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="ip"?ql(e.data,n.version)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"ip",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="jwt"?zl(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"jwt",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="cidr"?Vl(e.data,n.version)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"cidr",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="base64"?Nl.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"base64",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="base64url"?Ll.test(e.data)||(r=this._getOrReturnCtx(e,r),C(r,{validation:"base64url",code:R.invalid_string,message:n.message}),s.dirty()):Y.assertNever(n);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:R.invalid_string,...V.errToObj(s)})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...V.errToObj(e)})}url(e){return this._addCheck({kind:"url",...V.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...V.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...V.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...V.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...V.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...V.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...V.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...V.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...V.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...V.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...V.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...V.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...V.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...V.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...V.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...V.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...V.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...V.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...V.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...V.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...V.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...V.errToObj(t)})}nonempty(e){return this.min(1,V.errToObj(e))}trim(){return new a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};yr.create=a=>new yr({checks:[],typeName:T.ZodString,coerce:a?.coerce??!1,...J(a)});function Hl(a,e){let t=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,n=Number.parseInt(a.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return n%o/10**r}var Ir=class a extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==j.number){let n=this._getOrReturnCtx(e);return C(n,{code:R.invalid_type,expected:j.number,received:n.parsedType}),Z}let s,r=new we;for(let n of this._def.checks)n.kind==="int"?Y.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{code:R.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:R.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:R.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):n.kind==="multipleOf"?Hl(e.data,n.value)!==0&&(s=this._getOrReturnCtx(e,s),C(s,{code:R.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{code:R.not_finite,message:n.message}),r.dirty()):Y.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,V.toString(t))}gt(e,t){return this.setLimit("min",e,!1,V.toString(t))}lte(e,t){return this.setLimit("max",e,!0,V.toString(t))}lt(e,t){return this.setLimit("max",e,!1,V.toString(t))}setLimit(e,t,s,r){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:V.toString(r)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:V.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:V.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:V.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:V.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:V.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Y.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Ir.create=a=>new Ir({checks:[],typeName:T.ZodNumber,coerce:a?.coerce||!1,...J(a)});var kr=class a extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==j.bigint)return this._getInvalidInput(e);let s,r=new we;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:R.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),C(s,{code:R.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),C(s,{code:R.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):Y.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return C(t,{code:R.invalid_type,expected:j.bigint,received:t.parsedType}),Z}gte(e,t){return this.setLimit("min",e,!0,V.toString(t))}gt(e,t){return this.setLimit("min",e,!1,V.toString(t))}lte(e,t){return this.setLimit("max",e,!0,V.toString(t))}lt(e,t){return this.setLimit("max",e,!1,V.toString(t))}setLimit(e,t,s,r){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:V.toString(r)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:V.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};kr.create=a=>new kr({checks:[],typeName:T.ZodBigInt,coerce:a?.coerce??!1,...J(a)});var Dr=class extends K{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==j.boolean){let s=this._getOrReturnCtx(e);return C(s,{code:R.invalid_type,expected:j.boolean,received:s.parsedType}),Z}return Oe(e.data)}};Dr.create=a=>new Dr({typeName:T.ZodBoolean,coerce:a?.coerce||!1,...J(a)});var Cr=class a extends K{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==j.date){let n=this._getOrReturnCtx(e);return C(n,{code:R.invalid_type,expected:j.date,received:n.parsedType}),Z}if(Number.isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return C(n,{code:R.invalid_date}),Z}let s=new we,r;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),C(r,{code:R.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),C(r,{code:R.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):Y.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:V.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:V.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};Cr.create=a=>new Cr({checks:[],coerce:a?.coerce||!1,typeName:T.ZodDate,...J(a)});var st=class extends K{_parse(e){if(this._getType(e)!==j.symbol){let s=this._getOrReturnCtx(e);return C(s,{code:R.invalid_type,expected:j.symbol,received:s.parsedType}),Z}return Oe(e.data)}};st.create=a=>new st({typeName:T.ZodSymbol,...J(a)});var jr=class extends K{_parse(e){if(this._getType(e)!==j.undefined){let s=this._getOrReturnCtx(e);return C(s,{code:R.invalid_type,expected:j.undefined,received:s.parsedType}),Z}return Oe(e.data)}};jr.create=a=>new jr({typeName:T.ZodUndefined,...J(a)});var Nr=class extends K{_parse(e){if(this._getType(e)!==j.null){let s=this._getOrReturnCtx(e);return C(s,{code:R.invalid_type,expected:j.null,received:s.parsedType}),Z}return Oe(e.data)}};Nr.create=a=>new Nr({typeName:T.ZodNull,...J(a)});var _r=class extends K{constructor(){super(...arguments),this._any=!0}_parse(e){return Oe(e.data)}};_r.create=a=>new _r({typeName:T.ZodAny,...J(a)});var hr=class extends K{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Oe(e.data)}};hr.create=a=>new hr({typeName:T.ZodUnknown,...J(a)});var Ge=class extends K{_parse(e){let t=this._getOrReturnCtx(e);return C(t,{code:R.invalid_type,expected:j.never,received:t.parsedType}),Z}};Ge.create=a=>new Ge({typeName:T.ZodNever,...J(a)});var nt=class extends K{_parse(e){if(this._getType(e)!==j.undefined){let s=this._getOrReturnCtx(e);return C(s,{code:R.invalid_type,expected:j.void,received:s.parsedType}),Z}return Oe(e.data)}};nt.create=a=>new nt({typeName:T.ZodVoid,...J(a)});var pr=class a extends K{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==j.array)return C(t,{code:R.invalid_type,expected:j.array,received:t.parsedType}),Z;if(r.exactLength!==null){let o=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(o||i)&&(C(t,{code:o?R.too_big:R.too_small,minimum:i?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(C(t,{code:R.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(C(t,{code:R.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((o,i)=>r.type._parseAsync(new Ze(t,o,t.path,i)))).then(o=>we.mergeArray(s,o));let n=[...t.data].map((o,i)=>r.type._parseSync(new Ze(t,o,t.path,i)));return we.mergeArray(s,n)}get element(){return this._def.type}min(e,t){return new a({...this._def,minLength:{value:e,message:V.toString(t)}})}max(e,t){return new a({...this._def,maxLength:{value:e,message:V.toString(t)}})}length(e,t){return new a({...this._def,exactLength:{value:e,message:V.toString(t)}})}nonempty(e){return this.min(1,e)}};pr.create=(a,e)=>new pr({type:a,minLength:null,maxLength:null,exactLength:null,typeName:T.ZodArray,...J(e)});function at(a){if(a instanceof Ne){let e={};for(let t in a.shape){let s=a.shape[t];e[t]=Ue.create(at(s))}return new Ne({...a._def,shape:()=>e})}else return a instanceof pr?new pr({...a._def,type:at(a.element)}):a instanceof Ue?Ue.create(at(a.unwrap())):a instanceof sr?sr.create(at(a.unwrap())):a instanceof ar?ar.create(a.items.map(e=>at(e))):a}var Ne=class a extends K{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=Y.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==j.object){let u=this._getOrReturnCtx(e);return C(u,{code:R.invalid_type,expected:j.object,received:u.parsedType}),Z}let{status:s,ctx:r}=this._processInputParams(e),{shape:n,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof Ge&&this._def.unknownKeys==="strip"))for(let u in r.data)o.includes(u)||i.push(u);let c=[];for(let u of o){let h=n[u],m=r.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new Ze(r,m,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Ge){let u=this._def.unknownKeys;if(u==="passthrough")for(let h of i)c.push({key:{status:"valid",value:h},value:{status:"valid",value:r.data[h]}});else if(u==="strict")i.length>0&&(C(r,{code:R.unrecognized_keys,keys:i}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let h of i){let m=r.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new Ze(r,m,r.path,h)),alwaysSet:h in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let u=[];for(let h of c){let m=await h.key,b=await h.value;u.push({key:m,value:b,alwaysSet:h.alwaysSet})}return u}).then(u=>we.mergeObjectSync(s,u)):we.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return V.errToObj,new a({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{let r=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:V.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new a({...this._def,unknownKeys:"strip"})}passthrough(){return new a({...this._def,unknownKeys:"passthrough"})}extend(e){return new a({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new a({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:T.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new a({...this._def,catchall:e})}pick(e){let t={};for(let s of Y.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new a({...this._def,shape:()=>t})}omit(e){let t={};for(let s of Y.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new a({...this._def,shape:()=>t})}deepPartial(){return at(this)}partial(e){let t={};for(let s of Y.objectKeys(this.shape)){let r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new a({...this._def,shape:()=>t})}required(e){let t={};for(let s of Y.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof Ue;)n=n._def.innerType;t[s]=n}return new a({...this._def,shape:()=>t})}keyof(){return Ls(Y.objectKeys(this.shape))}};Ne.create=(a,e)=>new Ne({shape:()=>a,unknownKeys:"strip",catchall:Ge.create(),typeName:T.ZodObject,...J(e)});Ne.strictCreate=(a,e)=>new Ne({shape:()=>a,unknownKeys:"strict",catchall:Ge.create(),typeName:T.ZodObject,...J(e)});Ne.lazycreate=(a,e)=>new Ne({shape:a,unknownKeys:"strip",catchall:Ge.create(),typeName:T.ZodObject,...J(e)});var Lr=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=this._def.options;function r(n){for(let i of n)if(i.result.status==="valid")return i.result;for(let i of n)if(i.result.status==="dirty")return t.common.issues.push(...i.ctx.common.issues),i.result;let o=n.map(i=>new je(i.ctx.common.issues));return C(t,{code:R.invalid_union,unionErrors:o}),Z}if(t.common.async)return Promise.all(s.map(async n=>{let o={...t,common:{...t.common,issues:[]},parent:null};return{result:await n._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(r);{let n,o=[];for(let c of s){let u={...t,common:{...t.common,issues:[]},parent:null},h=c._parseSync({data:t.data,path:t.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!n&&(n={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(n)return t.common.issues.push(...n.ctx.common.issues),n.result;let i=o.map(c=>new je(c));return C(t,{code:R.invalid_union,unionErrors:i}),Z}}get options(){return this._def.options}};Lr.create=(a,e)=>new Lr({options:a,typeName:T.ZodUnion,...J(e)});var fr=a=>a instanceof Mr?fr(a.schema):a instanceof Be?fr(a.innerType()):a instanceof qr?[a.value]:a instanceof zr?a.options:a instanceof Vr?Y.objectValues(a.enum):a instanceof Hr?fr(a._def.innerType):a instanceof jr?[void 0]:a instanceof Nr?[null]:a instanceof Ue?[void 0,...fr(a.unwrap())]:a instanceof sr?[null,...fr(a.unwrap())]:a instanceof yt||a instanceof Zr?fr(a.unwrap()):a instanceof Ur?fr(a._def.innerType):[],kt=class a extends K{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.object)return C(t,{code:R.invalid_type,expected:j.object,received:t.parsedType}),Z;let s=this.discriminator,r=t.data[s],n=this.optionsMap.get(r);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(C(t,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let r=new Map;for(let n of t){let o=fr(n.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of o){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new a({typeName:T.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...J(s)})}};function Ia(a,e){let t=tr(a),s=tr(e);if(a===e)return{valid:!0,data:a};if(t===j.object&&s===j.object){let r=Y.objectKeys(e),n=Y.objectKeys(a).filter(i=>r.indexOf(i)!==-1),o={...a,...e};for(let i of n){let c=Ia(a[i],e[i]);if(!c.valid)return{valid:!1};o[i]=c.data}return{valid:!0,data:o}}else if(t===j.array&&s===j.array){if(a.length!==e.length)return{valid:!1};let r=[];for(let n=0;n<a.length;n++){let o=a[n],i=e[n],c=Ia(o,i);if(!c.valid)return{valid:!1};r.push(c.data)}return{valid:!0,data:r}}else return t===j.date&&s===j.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var Fr=class extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=(n,o)=>{if(At(n)||At(o))return Z;let i=Ia(n.value,o.value);return i.valid?((It(n)||It(o))&&t.dirty(),{status:t.value,value:i.data}):(C(s,{code:R.invalid_intersection_types}),Z)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([n,o])=>r(n,o)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Fr.create=(a,e,t)=>new Fr({left:a,right:e,typeName:T.ZodIntersection,...J(t)});var ar=class a extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==j.array)return C(s,{code:R.invalid_type,expected:j.array,received:s.parsedType}),Z;if(s.data.length<this._def.items.length)return C(s,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Z;!this._def.rest&&s.data.length>this._def.items.length&&(C(s,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...s.data].map((o,i)=>{let c=this._def.items[i]||this._def.rest;return c?c._parse(new Ze(s,o,s.path,i)):null}).filter(o=>!!o);return s.common.async?Promise.all(n).then(o=>we.mergeArray(t,o)):we.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new a({...this._def,rest:e})}};ar.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ar({items:a,typeName:T.ZodTuple,rest:null,...J(e)})};var Dt=class a extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==j.object)return C(s,{code:R.invalid_type,expected:j.object,received:s.parsedType}),Z;let r=[],n=this._def.keyType,o=this._def.valueType;for(let i in s.data)r.push({key:n._parse(new Ze(s,i,s.path,i)),value:o._parse(new Ze(s,s.data[i],s.path,i)),alwaysSet:i in s.data});return s.common.async?we.mergeObjectAsync(t,r):we.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof K?new a({keyType:e,valueType:t,typeName:T.ZodRecord,...J(s)}):new a({keyType:yr.create(),valueType:e,typeName:T.ZodRecord,...J(t)})}},it=class extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==j.map)return C(s,{code:R.invalid_type,expected:j.map,received:s.parsedType}),Z;let r=this._def.keyType,n=this._def.valueType,o=[...s.data.entries()].map(([i,c],u)=>({key:r._parse(new Ze(s,i,s.path,[u,"key"])),value:n._parse(new Ze(s,c,s.path,[u,"value"]))}));if(s.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let c of o){let u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return Z;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),i.set(u.value,h.value)}return{status:t.value,value:i}})}else{let i=new Map;for(let c of o){let u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return Z;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),i.set(u.value,h.value)}return{status:t.value,value:i}}}};it.create=(a,e,t)=>new it({valueType:e,keyType:a,typeName:T.ZodMap,...J(t)});var ot=class a extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==j.set)return C(s,{code:R.invalid_type,expected:j.set,received:s.parsedType}),Z;let r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(C(s,{code:R.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(C(s,{code:R.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let n=this._def.valueType;function o(c){let u=new Set;for(let h of c){if(h.status==="aborted")return Z;h.status==="dirty"&&t.dirty(),u.add(h.value)}return{status:t.value,value:u}}let i=[...s.data.values()].map((c,u)=>n._parse(new Ze(s,c,s.path,u)));return s.common.async?Promise.all(i).then(c=>o(c)):o(i)}min(e,t){return new a({...this._def,minSize:{value:e,message:V.toString(t)}})}max(e,t){return new a({...this._def,maxSize:{value:e,message:V.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};ot.create=(a,e)=>new ot({valueType:a,minSize:null,maxSize:null,typeName:T.ZodSet,...J(e)});var Ct=class a extends K{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.function)return C(t,{code:R.invalid_type,expected:j.function,received:t.parsedType}),Z;function s(i,c){return gt({data:i,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,rt(),dr].filter(u=>!!u),issueData:{code:R.invalid_arguments,argumentsError:c}})}function r(i,c){return gt({data:i,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,rt(),dr].filter(u=>!!u),issueData:{code:R.invalid_return_type,returnTypeError:c}})}let n={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof br){let i=this;return Oe(async function(...c){let u=new je([]),h=await i._def.args.parseAsync(c,n).catch(d=>{throw u.addIssue(s(c,d)),u}),m=await Reflect.apply(o,this,h);return await i._def.returns._def.type.parseAsync(m,n).catch(d=>{throw u.addIssue(r(m,d)),u})})}else{let i=this;return Oe(function(...c){let u=i._def.args.safeParse(c,n);if(!u.success)throw new je([s(c,u.error)]);let h=Reflect.apply(o,this,u.data),m=i._def.returns.safeParse(h,n);if(!m.success)throw new je([r(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new a({...this._def,args:ar.create(e).rest(hr.create())})}returns(e){return new a({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new a({args:e||ar.create([]).rest(hr.create()),returns:t||hr.create(),typeName:T.ZodFunction,...J(s)})}},Mr=class extends K{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Mr.create=(a,e)=>new Mr({getter:a,typeName:T.ZodLazy,...J(e)});var qr=class extends K{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return C(t,{received:t.data,code:R.invalid_literal,expected:this._def.value}),Z}return{status:"valid",value:e.data}}get value(){return this._def.value}};qr.create=(a,e)=>new qr({value:a,typeName:T.ZodLiteral,...J(e)});function Ls(a,e){return new zr({values:a,typeName:T.ZodEnum,...J(e)})}var zr=class a extends K{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),s=this._def.values;return C(t,{expected:Y.joinValues(s),received:t.parsedType,code:R.invalid_type}),Z}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return C(t,{received:t.data,code:R.invalid_enum_value,options:s}),Z}return Oe(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return a.create(e,{...this._def,...t})}exclude(e,t=this._def){return a.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}};zr.create=Ls;var Vr=class extends K{_parse(e){let t=Y.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==j.string&&s.parsedType!==j.number){let r=Y.objectValues(t);return C(s,{expected:Y.joinValues(r),received:s.parsedType,code:R.invalid_type}),Z}if(this._cache||(this._cache=new Set(Y.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let r=Y.objectValues(t);return C(s,{received:s.data,code:R.invalid_enum_value,options:r}),Z}return Oe(e.data)}get enum(){return this._def.values}};Vr.create=(a,e)=>new Vr({values:a,typeName:T.ZodNativeEnum,...J(e)});var br=class extends K{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.promise&&t.common.async===!1)return C(t,{code:R.invalid_type,expected:j.promise,received:t.parsedType}),Z;let s=t.parsedType===j.promise?t.data:Promise.resolve(t.data);return Oe(s.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}};br.create=(a,e)=>new br({type:a,typeName:T.ZodPromise,...J(e)});var Be=class extends K{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===T.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,n={addIssue:o=>{C(s,o),o.fatal?t.abort():t.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),r.type==="preprocess"){let o=r.transform(s.data,n);if(s.common.async)return Promise.resolve(o).then(async i=>{if(t.value==="aborted")return Z;let c=await this._def.schema._parseAsync({data:i,path:s.path,parent:s});return c.status==="aborted"?Z:c.status==="dirty"?Ar(c.value):t.value==="dirty"?Ar(c.value):c});{if(t.value==="aborted")return Z;let i=this._def.schema._parseSync({data:o,path:s.path,parent:s});return i.status==="aborted"?Z:i.status==="dirty"?Ar(i.value):t.value==="dirty"?Ar(i.value):i}}if(r.type==="refinement"){let o=i=>{let c=r.refinement(i,n);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(s.common.async===!1){let i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Z:(i.status==="dirty"&&t.dirty(),o(i.value),{status:t.value,value:i.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>i.status==="aborted"?Z:(i.status==="dirty"&&t.dirty(),o(i.value).then(()=>({status:t.value,value:i.value}))))}if(r.type==="transform")if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!gr(o))return Z;let i=r.transform(o.value,n);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>gr(o)?Promise.resolve(r.transform(o.value,n)).then(i=>({status:t.value,value:i})):Z);Y.assertNever(r)}};Be.create=(a,e,t)=>new Be({schema:a,typeName:T.ZodEffects,effect:e,...J(t)});Be.createWithPreprocess=(a,e,t)=>new Be({schema:e,effect:{type:"preprocess",transform:a},typeName:T.ZodEffects,...J(t)});var Ue=class extends K{_parse(e){return this._getType(e)===j.undefined?Oe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ue.create=(a,e)=>new Ue({innerType:a,typeName:T.ZodOptional,...J(e)});var sr=class extends K{_parse(e){return this._getType(e)===j.null?Oe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};sr.create=(a,e)=>new sr({innerType:a,typeName:T.ZodNullable,...J(e)});var Hr=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return t.parsedType===j.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Hr.create=(a,e)=>new Hr({innerType:a,typeName:T.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...J(e)});var Ur=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return tt(r)?r.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new je(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new je(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Ur.create=(a,e)=>new Ur({innerType:a,typeName:T.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...J(e)});var lt=class extends K{_parse(e){if(this._getType(e)!==j.nan){let s=this._getOrReturnCtx(e);return C(s,{code:R.invalid_type,expected:j.nan,received:s.parsedType}),Z}return{status:"valid",value:e.data}}};lt.create=a=>new lt({typeName:T.ZodNaN,...J(a)});var Ul=Symbol("zod_brand"),yt=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}},_t=class a extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Z:n.status==="dirty"?(t.dirty(),Ar(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Z:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new a({in:e,out:t,typeName:T.ZodPipeline})}},Zr=class extends K{_parse(e){let t=this._def.innerType._parse(e),s=r=>(gr(r)&&(r.value=Object.freeze(r.value)),r);return tt(t)?t.then(r=>s(r)):s(t)}unwrap(){return this._def.innerType}};Zr.create=(a,e)=>new Zr({innerType:a,typeName:T.ZodReadonly,...J(e)});function Ds(a,e){let t=typeof a=="function"?a(e):typeof a=="string"?{message:a}:a;return typeof t=="string"?{message:t}:t}function Fs(a,e={},t){return a?_r.create().superRefine((s,r)=>{let n=a(s);if(n instanceof Promise)return n.then(o=>{if(!o){let i=Ds(e,s),c=i.fatal??t??!0;r.addIssue({code:"custom",...i,fatal:c})}});if(!n){let o=Ds(e,s),i=o.fatal??t??!0;r.addIssue({code:"custom",...o,fatal:i})}}):_r.create()}var Zl={object:Ne.lazycreate},T;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(T||(T={}));var Bl=(a,e={message:`Input not instance of ${a.name}`})=>Fs(t=>t instanceof a,e),Ms=yr.create,qs=Ir.create,Ql=lt.create,Jl=kr.create,zs=Dr.create,Kl=Cr.create,Gl=st.create,Wl=jr.create,Xl=Nr.create,Yl=_r.create,ec=hr.create,rc=Ge.create,tc=nt.create,ac=pr.create,sc=Ne.create,nc=Ne.strictCreate,ic=Lr.create,oc=kt.create,lc=Fr.create,cc=ar.create,uc=Dt.create,dc=it.create,fc=ot.create,hc=Ct.create,pc=Mr.create,mc=qr.create,vc=zr.create,gc=Vr.create,yc=br.create,_c=Be.create,bc=Ue.create,Pc=sr.create,xc=Be.createWithPreprocess,Ec=_t.create,Sc=()=>Ms().optional(),Rc=()=>qs().optional(),wc=()=>zs().optional(),Tc={string:a=>yr.create({...a,coerce:!0}),number:a=>Ir.create({...a,coerce:!0}),boolean:a=>Dr.create({...a,coerce:!0}),bigint:a=>kr.create({...a,coerce:!0}),date:a=>Cr.create({...a,coerce:!0})};var $c=Z;var ka="2025-06-18";var Vs=[ka,"2025-03-26","2024-11-05","2024-10-07"],jt="2.0",Hs=l.union([l.string(),l.number().int()]),Us=l.string(),Oc=l.object({progressToken:l.optional(Hs)}).passthrough(),Qe=l.object({_meta:l.optional(Oc)}).passthrough(),Le=l.object({method:l.string(),params:l.optional(Qe)}),bt=l.object({_meta:l.optional(l.object({}).passthrough())}).passthrough(),nr=l.object({method:l.string(),params:l.optional(bt)}),Je=l.object({_meta:l.optional(l.object({}).passthrough())}).passthrough(),Nt=l.union([l.string(),l.number().int()]),Zs=l.object({jsonrpc:l.literal(jt),id:Nt}).merge(Le).strict(),Bs=a=>Zs.safeParse(a).success,Qs=l.object({jsonrpc:l.literal(jt)}).merge(nr).strict(),Js=a=>Qs.safeParse(a).success,Ks=l.object({jsonrpc:l.literal(jt),id:Nt,result:Je}).strict(),Da=a=>Ks.safeParse(a).success,de;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(de||(de={}));var Gs=l.object({jsonrpc:l.literal(jt),id:Nt,error:l.object({code:l.number().int(),message:l.string(),data:l.optional(l.unknown())})}).strict(),Ws=a=>Gs.safeParse(a).success,Bf=l.union([Zs,Qs,Ks,Gs]),Lt=Je.strict(),Ft=nr.extend({method:l.literal("notifications/cancelled"),params:bt.extend({requestId:Nt,reason:l.string().optional()})}),Ac=l.object({src:l.string(),mimeType:l.optional(l.string()),sizes:l.optional(l.array(l.string()))}).passthrough(),Pt=l.object({icons:l.array(Ac).optional()}).passthrough(),xt=l.object({name:l.string(),title:l.optional(l.string())}).passthrough(),Xs=xt.extend({version:l.string(),websiteUrl:l.optional(l.string())}).merge(Pt),Ic=l.object({experimental:l.optional(l.object({}).passthrough()),sampling:l.optional(l.object({}).passthrough()),elicitation:l.optional(l.object({}).passthrough()),roots:l.optional(l.object({listChanged:l.optional(l.boolean())}).passthrough())}).passthrough(),Ca=Le.extend({method:l.literal("initialize"),params:Qe.extend({protocolVersion:l.string(),capabilities:Ic,clientInfo:Xs})});var kc=l.object({experimental:l.optional(l.object({}).passthrough()),logging:l.optional(l.object({}).passthrough()),completions:l.optional(l.object({}).passthrough()),prompts:l.optional(l.object({listChanged:l.optional(l.boolean())}).passthrough()),resources:l.optional(l.object({subscribe:l.optional(l.boolean()),listChanged:l.optional(l.boolean())}).passthrough()),tools:l.optional(l.object({listChanged:l.optional(l.boolean())}).passthrough())}).passthrough(),Dc=Je.extend({protocolVersion:l.string(),capabilities:kc,serverInfo:Xs,instructions:l.optional(l.string())}),ja=nr.extend({method:l.literal("notifications/initialized")});var Mt=Le.extend({method:l.literal("ping")}),Cc=l.object({progress:l.number(),total:l.optional(l.number()),message:l.optional(l.string())}).passthrough(),qt=nr.extend({method:l.literal("notifications/progress"),params:bt.merge(Cc).extend({progressToken:Hs})}),zt=Le.extend({params:Qe.extend({cursor:l.optional(Us)}).optional()}),Vt=Je.extend({nextCursor:l.optional(Us)}),Ys=l.object({uri:l.string(),mimeType:l.optional(l.string()),_meta:l.optional(l.object({}).passthrough())}).passthrough(),en=Ys.extend({text:l.string()}),Na=l.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),rn=Ys.extend({blob:Na}),tn=xt.extend({uri:l.string(),description:l.optional(l.string()),mimeType:l.optional(l.string()),_meta:l.optional(l.object({}).passthrough())}).merge(Pt),jc=xt.extend({uriTemplate:l.string(),description:l.optional(l.string()),mimeType:l.optional(l.string()),_meta:l.optional(l.object({}).passthrough())}).merge(Pt),Ht=zt.extend({method:l.literal("resources/list")}),Nc=Vt.extend({resources:l.array(tn)}),Ut=zt.extend({method:l.literal("resources/templates/list")}),Lc=Vt.extend({resourceTemplates:l.array(jc)}),Zt=Le.extend({method:l.literal("resources/read"),params:Qe.extend({uri:l.string()})}),Fc=Je.extend({contents:l.array(l.union([en,rn]))}),Mc=nr.extend({method:l.literal("notifications/resources/list_changed")}),qc=Le.extend({method:l.literal("resources/subscribe"),params:Qe.extend({uri:l.string()})}),zc=Le.extend({method:l.literal("resources/unsubscribe"),params:Qe.extend({uri:l.string()})}),Vc=nr.extend({method:l.literal("notifications/resources/updated"),params:bt.extend({uri:l.string()})}),Hc=l.object({name:l.string(),description:l.optional(l.string()),required:l.optional(l.boolean())}).passthrough(),Uc=xt.extend({description:l.optional(l.string()),arguments:l.optional(l.array(Hc)),_meta:l.optional(l.object({}).passthrough())}).merge(Pt),Bt=zt.extend({method:l.literal("prompts/list")}),Zc=Vt.extend({prompts:l.array(Uc)}),Qt=Le.extend({method:l.literal("prompts/get"),params:Qe.extend({name:l.string(),arguments:l.optional(l.record(l.string()))})}),La=l.object({type:l.literal("text"),text:l.string(),_meta:l.optional(l.object({}).passthrough())}).passthrough(),Fa=l.object({type:l.literal("image"),data:Na,mimeType:l.string(),_meta:l.optional(l.object({}).passthrough())}).passthrough(),Ma=l.object({type:l.literal("audio"),data:Na,mimeType:l.string(),_meta:l.optional(l.object({}).passthrough())}).passthrough(),Bc=l.object({type:l.literal("resource"),resource:l.union([en,rn]),_meta:l.optional(l.object({}).passthrough())}).passthrough(),Qc=tn.extend({type:l.literal("resource_link")}),an=l.union([La,Fa,Ma,Qc,Bc]),Jc=l.object({role:l.enum(["user","assistant"]),content:an}).passthrough(),Kc=Je.extend({description:l.optional(l.string()),messages:l.array(Jc)}),Gc=nr.extend({method:l.literal("notifications/prompts/list_changed")}),Wc=l.object({title:l.optional(l.string()),readOnlyHint:l.optional(l.boolean()),destructiveHint:l.optional(l.boolean()),idempotentHint:l.optional(l.boolean()),openWorldHint:l.optional(l.boolean())}).passthrough(),Xc=xt.extend({description:l.optional(l.string()),inputSchema:l.object({type:l.literal("object"),properties:l.optional(l.object({}).passthrough()),required:l.optional(l.array(l.string()))}).passthrough(),outputSchema:l.optional(l.object({type:l.literal("object"),properties:l.optional(l.object({}).passthrough()),required:l.optional(l.array(l.string()))}).passthrough()),annotations:l.optional(Wc),_meta:l.optional(l.object({}).passthrough())}).merge(Pt),Jt=zt.extend({method:l.literal("tools/list")}),Yc=Vt.extend({tools:l.array(Xc)}),sn=Je.extend({content:l.array(an).default([]),structuredContent:l.object({}).passthrough().optional(),isError:l.optional(l.boolean())}),Qf=sn.or(Je.extend({toolResult:l.unknown()})),Kt=Le.extend({method:l.literal("tools/call"),params:Qe.extend({name:l.string(),arguments:l.optional(l.record(l.unknown()))})}),eu=nr.extend({method:l.literal("notifications/tools/list_changed")}),Et=l.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),qa=Le.extend({method:l.literal("logging/setLevel"),params:Qe.extend({level:Et})}),ru=nr.extend({method:l.literal("notifications/message"),params:bt.extend({level:Et,logger:l.optional(l.string()),data:l.unknown()})}),tu=l.object({name:l.string().optional()}).passthrough(),au=l.object({hints:l.optional(l.array(tu)),costPriority:l.optional(l.number().min(0).max(1)),speedPriority:l.optional(l.number().min(0).max(1)),intelligencePriority:l.optional(l.number().min(0).max(1))}).passthrough(),su=l.object({role:l.enum(["user","assistant"]),content:l.union([La,Fa,Ma])}).passthrough(),nu=Le.extend({method:l.literal("sampling/createMessage"),params:Qe.extend({messages:l.array(su),systemPrompt:l.optional(l.string()),includeContext:l.optional(l.enum(["none","thisServer","allServers"])),temperature:l.optional(l.number()),maxTokens:l.number().int(),stopSequences:l.optional(l.array(l.string())),metadata:l.optional(l.object({}).passthrough()),modelPreferences:l.optional(au)})}),za=Je.extend({model:l.string(),stopReason:l.optional(l.enum(["endTurn","stopSequence","maxTokens"]).or(l.string())),role:l.enum(["user","assistant"]),content:l.discriminatedUnion("type",[La,Fa,Ma])}),iu=l.object({type:l.literal("boolean"),title:l.optional(l.string()),description:l.optional(l.string()),default:l.optional(l.boolean())}).passthrough(),ou=l.object({type:l.literal("string"),title:l.optional(l.string()),description:l.optional(l.string()),minLength:l.optional(l.number()),maxLength:l.optional(l.number()),format:l.optional(l.enum(["email","uri","date","date-time"]))}).passthrough(),lu=l.object({type:l.enum(["number","integer"]),title:l.optional(l.string()),description:l.optional(l.string()),minimum:l.optional(l.number()),maximum:l.optional(l.number())}).passthrough(),cu=l.object({type:l.literal("string"),title:l.optional(l.string()),description:l.optional(l.string()),enum:l.array(l.string()),enumNames:l.optional(l.array(l.string()))}).passthrough(),uu=l.union([iu,ou,lu,cu]),du=Le.extend({method:l.literal("elicitation/create"),params:Qe.extend({message:l.string(),requestedSchema:l.object({type:l.literal("object"),properties:l.record(l.string(),uu),required:l.optional(l.array(l.string()))}).passthrough()})}),Va=Je.extend({action:l.enum(["accept","decline","cancel"]),content:l.optional(l.record(l.string(),l.unknown()))}),fu=l.object({type:l.literal("ref/resource"),uri:l.string()}).passthrough();var hu=l.object({type:l.literal("ref/prompt"),name:l.string()}).passthrough(),Gt=Le.extend({method:l.literal("completion/complete"),params:Qe.extend({ref:l.union([hu,fu]),argument:l.object({name:l.string(),value:l.string()}).passthrough(),context:l.optional(l.object({arguments:l.optional(l.record(l.string(),l.string()))}))})}),pu=Je.extend({completion:l.object({values:l.array(l.string()).max(100),total:l.optional(l.number().int()),hasMore:l.optional(l.boolean())}).passthrough()}),mu=l.object({uri:l.string().startsWith("file://"),name:l.optional(l.string()),_meta:l.optional(l.object({}).passthrough())}).passthrough(),vu=Le.extend({method:l.literal("roots/list")}),Ha=Je.extend({roots:l.array(mu)}),gu=nr.extend({method:l.literal("notifications/roots/list_changed")}),Jf=l.union([Mt,Ca,Gt,qa,Qt,Bt,Ht,Ut,Zt,qc,zc,Kt,Jt]),Kf=l.union([Ft,qt,ja,gu]),Gf=l.union([Lt,za,Va,Ha]),Wf=l.union([Mt,nu,du,vu]),Xf=l.union([Ft,qt,ru,Vc,Mc,eu,Gc]),Yf=l.union([Lt,Dc,pu,Kc,Zc,Nc,Lc,Fc,sn,Yc]),fe=class extends Error{constructor(e,t,s){super(`MCP error ${e}: ${t}`),this.code=e,this.data=s,this.name="McpError"}};var yu=6e4,Wt=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Ft,t=>{let s=this._requestHandlerAbortControllers.get(t.params.requestId);s?.abort(t.params.reason)}),this.setNotificationHandler(qt,t=>{this._onprogress(t)}),this.setRequestHandler(Mt,t=>({}))}_setupTimeout(e,t,s,r,n=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:s,resetTimeoutOnProgress:n,onTimeout:r})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let s=Date.now()-t.startTime;if(t.maxTotalTimeout&&s>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new fe(de.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:s});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,s,r;this._transport=e;let n=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{n?.(),this._onclose()};let o=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=c=>{o?.(c),this._onerror(c)};let i=(r=this._transport)===null||r===void 0?void 0:r.onmessage;this._transport.onmessage=(c,u)=>{i?.(c,u),Da(c)||Ws(c)?this._onresponse(c):Bs(c)?this._onrequest(c,u):Js(c)?this._onnotification(c):this._onerror(new Error(`Unknown message type: ${JSON.stringify(c)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new fe(de.ConnectionClosed,"Connection closed");for(let r of t.values())r(s)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let s=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,t){var s,r;let n=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,o=this._transport;if(n===void 0){o?.send({jsonrpc:"2.0",id:e.id,error:{code:de.MethodNotFound,message:"Method not found"}}).catch(u=>this._onerror(new Error(`Failed to send an error response: ${u}`)));return}let i=new AbortController;this._requestHandlerAbortControllers.set(e.id,i);let c={signal:i.signal,sessionId:o?.sessionId,_meta:(r=e.params)===null||r===void 0?void 0:r._meta,sendNotification:u=>this.notification(u,{relatedRequestId:e.id}),sendRequest:(u,h,m)=>this.request(u,h,{...m,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>n(e,c)).then(u=>{if(!i.signal.aborted)return o?.send({result:u,jsonrpc:"2.0",id:e.id})},u=>{var h;if(!i.signal.aborted)return o?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(u.code)?u.code:de.InternalError,message:(h=u.message)!==null&&h!==void 0?h:"Internal error"}})}).catch(u=>this._onerror(new Error(`Failed to send response: ${u}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...s}=e.params,r=Number(t),n=this._progressHandlers.get(r);if(!n){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let o=this._responseHandlers.get(r),i=this._timeoutInfo.get(r);if(i&&o&&i.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(c){o(c);return}n(s)}_onresponse(e){let t=Number(e.id),s=this._responseHandlers.get(t);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),Da(e))s(e);else{let r=new fe(e.error.code,e.error.message,e.error.data);s(r)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,t,s){let{relatedRequestId:r,resumptionToken:n,onresumptiontoken:o}=s??{};return new Promise((i,c)=>{var u,h,m,b,d,y;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(h=s?.signal)===null||h===void 0||h.throwIfAborted();let _=this._requestMessageId++,g={...e,jsonrpc:"2.0",id:_};s?.onprogress&&(this._progressHandlers.set(_,s.onprogress),g.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:_}});let E=w=>{var A;this._responseHandlers.delete(_),this._progressHandlers.delete(_),this._cleanupTimeout(_),(A=this._transport)===null||A===void 0||A.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:_,reason:String(w)}},{relatedRequestId:r,resumptionToken:n,onresumptiontoken:o}).catch(I=>this._onerror(new Error(`Failed to send cancellation: ${I}`))),c(w)};this._responseHandlers.set(_,w=>{var A;if(!(!((A=s?.signal)===null||A===void 0)&&A.aborted)){if(w instanceof Error)return c(w);try{let I=t.parse(w.result);i(I)}catch(I){c(I)}}}),(b=s?.signal)===null||b===void 0||b.addEventListener("abort",()=>{var w;E((w=s?.signal)===null||w===void 0?void 0:w.reason)});let O=(d=s?.timeout)!==null&&d!==void 0?d:yu,S=()=>E(new fe(de.RequestTimeout,"Request timed out",{timeout:O}));this._setupTimeout(_,O,s?.maxTotalTimeout,S,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(g,{relatedRequestId:r,resumptionToken:n,onresumptiontoken:o}).catch(w=>{this._cleanupTimeout(_),c(w)})})}async notification(e,t){var s,r;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((r=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&r!==void 0?r:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var c;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(c=this._transport)===null||c===void 0||c.send(u,t).catch(h=>this._onerror(h))});return}let i={...e,jsonrpc:"2.0"};await this._transport.send(i,t)}setRequestHandler(e,t){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(r,n)=>Promise.resolve(t(e.parse(r),n)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(t(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function nn(a,e){return Object.entries(e).reduce((t,[s,r])=>(r&&typeof r=="object"?t[s]=t[s]?{...t[s],...r}:r:t[s]=r,t),{...a})}var lo=yl(oo(),1),va=class extends Wt{constructor(e,t){var s;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Et.options.map((r,n)=>[r,n])),this.isMessageIgnored=(r,n)=>{let o=this._loggingLevels.get(n);return o?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(o):!1},this._capabilities=(s=t?.capabilities)!==null&&s!==void 0?s:{},this._instructions=t?.instructions,this.setRequestHandler(Ca,r=>this._oninitialize(r)),this.setNotificationHandler(ja,()=>{var r;return(r=this.oninitialized)===null||r===void 0?void 0:r.call(this)}),this._capabilities.logging&&this.setRequestHandler(qa,async(r,n)=>{var o;let i=n.sessionId||((o=n.requestInfo)===null||o===void 0?void 0:o.headers["mcp-session-id"])||void 0,{level:c}=r.params,u=Et.safeParse(c);return u.success&&this._loggingLevels.set(i,u.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=nn(this._capabilities,e)}assertCapabilityForMethod(e){var t,s,r;switch(e){case"sampling/createMessage":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:Vs.includes(t)?t:ka,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},Lt)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},za,t)}async elicitInput(e,t){let s=await this.request({method:"elicitation/create",params:e},Va,t);if(s.action==="accept"&&s.content)try{let r=new lo.default,n=r.compile(e.requestedSchema);if(!n(s.content))throw new fe(de.InvalidParams,`Elicitation response content does not match requested schema: ${r.errorsText(n.errors)}`)}catch(r){throw r instanceof fe?r:new fe(de.InternalError,`Error validating elicitation response: ${r}`)}return s}async listRoots(e,t){return this.request({method:"roots/list",params:e},Ha,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var uo=Symbol("Let zodToJsonSchema decide on which parser to use");var co={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},fo=a=>typeof a=="string"?{...co,name:a}:{...co,...a};var ho=a=>{let e=fo(a),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,r])=>[r._def,{def:r._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}};function ps(a,e,t,s){s?.errorMessages&&t&&(a.errorMessage={...a.errorMessage,[e]:t})}function ee(a,e,t,s,r){a[e]=t,ps(a,e,s,r)}var ga=(a,e)=>{let t=0;for(;t<a.length&&t<e.length&&a[t]===e[t];t++);return[(a.length-t).toString(),...e.slice(t)].join("/")};function pe(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?ga(e,a.currentPath):e.join("/")}}function po(a,e){let t={type:"array"};return a.type?._def&&a.type?._def?.typeName!==T.ZodAny&&(t.items=B(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&ee(t,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&ee(t,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(ee(t,"minItems",a.exactLength.value,a.exactLength.message,e),ee(t,"maxItems",a.exactLength.value,a.exactLength.message,e)),t}function mo(a,e){let t={type:"integer",format:"int64"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?ee(t,"minimum",s.value,s.message,e):ee(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),ee(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?ee(t,"maximum",s.value,s.message,e):ee(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),ee(t,"maximum",s.value,s.message,e));break;case"multipleOf":ee(t,"multipleOf",s.value,s.message,e);break}return t}function vo(){return{type:"boolean"}}function ya(a,e){return B(a.type._def,e)}var go=(a,e)=>B(a.innerType._def,e);function ms(a,e,t){let s=t??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((r,n)=>ms(a,e,r))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Wd(a,e)}}var Wd=(a,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let s of a.checks)switch(s.kind){case"min":ee(t,"minimum",s.value,s.message,e);break;case"max":ee(t,"maximum",s.value,s.message,e);break}return t};function yo(a,e){return{...B(a.innerType._def,e),default:a.defaultValue()}}function _o(a,e){return e.effectStrategy==="input"?B(a.schema._def,e):pe(e)}function bo(a){return{type:"string",enum:Array.from(a.values)}}var Xd=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function Po(a,e){let t=[B(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),B(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(n=>!!n),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(n=>{if(Xd(n))r.push(...n.allOf),n.unevaluatedProperties===void 0&&(s=void 0);else{let o=n;if("additionalProperties"in n&&n.additionalProperties===!1){let{additionalProperties:i,...c}=n;o=c}else s=void 0;r.push(o)}}),r.length?{allOf:r,...s}:void 0}function xo(a,e){let t=typeof a.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[a.value]}:{type:t==="bigint"?"integer":t,const:a.value}}var vs,We={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(vs===void 0&&(vs=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),vs),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function _a(a,e){let t={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":ee(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":ee(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Xe(t,"email",s.message,e);break;case"format:idn-email":Xe(t,"idn-email",s.message,e);break;case"pattern:zod":De(t,We.email,s.message,e);break}break;case"url":Xe(t,"uri",s.message,e);break;case"uuid":Xe(t,"uuid",s.message,e);break;case"regex":De(t,s.regex,s.message,e);break;case"cuid":De(t,We.cuid,s.message,e);break;case"cuid2":De(t,We.cuid2,s.message,e);break;case"startsWith":De(t,RegExp(`^${gs(s.value,e)}`),s.message,e);break;case"endsWith":De(t,RegExp(`${gs(s.value,e)}$`),s.message,e);break;case"datetime":Xe(t,"date-time",s.message,e);break;case"date":Xe(t,"date",s.message,e);break;case"time":Xe(t,"time",s.message,e);break;case"duration":Xe(t,"duration",s.message,e);break;case"length":ee(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),ee(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{De(t,RegExp(gs(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Xe(t,"ipv4",s.message,e),s.version!=="v4"&&Xe(t,"ipv6",s.message,e);break}case"base64url":De(t,We.base64url,s.message,e);break;case"jwt":De(t,We.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&De(t,We.ipv4Cidr,s.message,e),s.version!=="v4"&&De(t,We.ipv6Cidr,s.message,e);break}case"emoji":De(t,We.emoji(),s.message,e);break;case"ulid":{De(t,We.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Xe(t,"binary",s.message,e);break}case"contentEncoding:base64":{ee(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{De(t,We.base64,s.message,e);break}}break}case"nanoid":De(t,We.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function gs(a,e){return e.patternStrategy==="escape"?ef(a):a}var Yd=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ef(a){let e="";for(let t=0;t<a.length;t++)Yd.has(a[t])||(e+="\\"),e+=a[t];return e}function Xe(a,e,t,s){a.format||a.anyOf?.some(r=>r.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):ee(a,"format",e,t,s)}function De(a,e,t,s){a.pattern||a.allOf?.some(r=>r.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:Eo(e,s),...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):ee(a,"pattern",Eo(e,s),t,s)}function Eo(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let t={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=t.i?a.source.toLowerCase():a.source,r="",n=!1,o=!1,i=!1;for(let c=0;c<s.length;c++){if(n){r+=s[c],n=!1;continue}if(t.i){if(o){if(s[c].match(/[a-z]/)){i?(r+=s[c],r+=`${s[c-2]}-${s[c]}`.toUpperCase(),i=!1):s[c+1]==="-"&&s[c+2]?.match(/[a-z]/)?(r+=s[c],i=!0):r+=`${s[c]}${s[c].toUpperCase()}`;continue}}else if(s[c].match(/[a-z]/)){r+=`[${s[c]}${s[c].toUpperCase()}]`;continue}}if(t.m){if(s[c]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[c]==="$"){r+=`($|(?=[\r
]))`;continue}}if(t.s&&s[c]==="."){r+=o?`${s[c]}\r
`:`[${s[c]}\r
]`;continue}r+=s[c],s[c]==="\\"?n=!0:o&&s[c]==="]"?o=!1:!o&&s[c]==="["&&(o=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return r}function ba(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===T.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,r)=>({...s,[r]:B(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",r]})??pe(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:B(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(a.keyType?._def.typeName===T.ZodString&&a.keyType._def.checks?.length){let{type:s,...r}=_a(a.keyType._def,e);return{...t,propertyNames:r}}else{if(a.keyType?._def.typeName===T.ZodEnum)return{...t,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===T.ZodBranded&&a.keyType._def.type._def.typeName===T.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...r}=ya(a.keyType._def,e);return{...t,propertyNames:r}}}return t}function So(a,e){if(e.mapStrategy==="record")return ba(a,e);let t=B(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||pe(e),s=B(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||pe(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}function Ro(a){let e=a.values,s=Object.keys(a.values).filter(n=>typeof e[e[n]]!="number").map(n=>e[n]),r=Array.from(new Set(s.map(n=>typeof n)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:s}}function wo(a){return a.target==="openAi"?void 0:{not:pe({...a,currentPath:[...a.currentPath,"not"]})}}function To(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Rt={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Oo(a,e){if(e.target==="openApi3")return $o(a,e);let t=a.options instanceof Map?Array.from(a.options.values()):a.options;if(t.every(s=>s._def.typeName in Rt&&(!s._def.checks||!s._def.checks.length))){let s=t.reduce((r,n)=>{let o=Rt[n._def.typeName];return o&&!r.includes(o)?[...r,o]:r},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=t.reduce((r,n)=>{let o=typeof n._def.value;switch(o){case"string":case"number":case"boolean":return[...r,o];case"bigint":return[...r,"integer"];case"object":if(n._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(s.length===t.length){let r=s.filter((n,o,i)=>i.indexOf(n)===o);return{type:r.length>1?r:r[0],enum:t.reduce((n,o)=>n.includes(o._def.value)?n:[...n,o._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,r)=>[...s,...r._def.values.filter(n=>!s.includes(n))],[])};return $o(a,e)}var $o=(a,e)=>{let t=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,r)=>B(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};function Ao(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:Rt[a.innerType._def.typeName],nullable:!0}:{type:[Rt[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=B(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let t=B(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function Io(a,e){let t={type:"number"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"int":t.type="integer",ps(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?ee(t,"minimum",s.value,s.message,e):ee(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),ee(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?ee(t,"maximum",s.value,s.message,e):ee(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),ee(t,"maximum",s.value,s.message,e));break;case"multipleOf":ee(t,"multipleOf",s.value,s.message,e);break}return t}function ko(a,e){let t=e.target==="openAi",s={type:"object",properties:{}},r=[],n=a.shape();for(let i in n){let c=n[i];if(c===void 0||c._def===void 0)continue;let u=tf(c);u&&t&&(c._def.typeName==="ZodOptional"&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),u=!1);let h=B(c._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});h!==void 0&&(s.properties[i]=h,u||r.push(i))}r.length&&(s.required=r);let o=rf(a,e);return o!==void 0&&(s.additionalProperties=o),s}function rf(a,e){if(a.catchall._def.typeName!=="ZodNever")return B(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function tf(a){try{return a.isOptional()}catch{return!0}}var Do=(a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return B(a.innerType._def,e);let t=B(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:pe(e)},t]}:pe(e)};var Co=(a,e)=>{if(e.pipeStrategy==="input")return B(a.in._def,e);if(e.pipeStrategy==="output")return B(a.out._def,e);let t=B(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=B(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(r=>r!==void 0)}};function jo(a,e){return B(a.type._def,e)}function No(a,e){let s={type:"array",uniqueItems:!0,items:B(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&ee(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&ee(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}function Lo(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((t,s)=>B(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:B(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((t,s)=>B(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}function Fo(a){return{not:pe(a)}}function Mo(a){return pe(a)}var qo=(a,e)=>B(a.innerType._def,e);var zo=(a,e,t)=>{switch(e){case T.ZodString:return _a(a,t);case T.ZodNumber:return Io(a,t);case T.ZodObject:return ko(a,t);case T.ZodBigInt:return mo(a,t);case T.ZodBoolean:return vo();case T.ZodDate:return ms(a,t);case T.ZodUndefined:return Fo(t);case T.ZodNull:return To(t);case T.ZodArray:return po(a,t);case T.ZodUnion:case T.ZodDiscriminatedUnion:return Oo(a,t);case T.ZodIntersection:return Po(a,t);case T.ZodTuple:return Lo(a,t);case T.ZodRecord:return ba(a,t);case T.ZodLiteral:return xo(a,t);case T.ZodEnum:return bo(a);case T.ZodNativeEnum:return Ro(a);case T.ZodNullable:return Ao(a,t);case T.ZodOptional:return Do(a,t);case T.ZodMap:return So(a,t);case T.ZodSet:return No(a,t);case T.ZodLazy:return()=>a.getter()._def;case T.ZodPromise:return jo(a,t);case T.ZodNaN:case T.ZodNever:return wo(t);case T.ZodEffects:return _o(a,t);case T.ZodAny:return pe(t);case T.ZodUnknown:return Mo(t);case T.ZodDefault:return yo(a,t);case T.ZodBranded:return ya(a,t);case T.ZodReadonly:return qo(a,t);case T.ZodCatch:return go(a,t);case T.ZodPipeline:return Co(a,t);case T.ZodFunction:case T.ZodVoid:case T.ZodSymbol:return;default:return(s=>{})(e)}};function B(a,e,t=!1){let s=e.seen.get(a);if(e.override){let i=e.override?.(a,e,s,t);if(i!==uo)return i}if(s&&!t){let i=af(s,e);if(i!==void 0)return i}let r={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,r);let n=zo(a,a.typeName,e),o=typeof n=="function"?B(n(),e):n;if(o&&sf(a,e,o),e.postProcess){let i=e.postProcess(o,a,e);return r.jsonSchema=o,i}return r.jsonSchema=o,o}var af=(a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:ga(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),pe(e)):e.$refStrategy==="seen"?pe(e):void 0}},sf=(a,e,t)=>(a.description&&(t.description=a.description,e.markdownDescription&&(t.markdownDescription=a.description)),t);var Pa=(a,e)=>{let t=ho(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((c,[u,h])=>({...c,[u]:B(h._def,{...t,currentPath:[...t.basePath,t.definitionPath,u]},!0)??pe(t)}),{}):void 0,r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,n=B(a._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??pe(t),o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(n.title=o),t.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[t.openAiAnyTypeName]||(s[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));let i=r===void 0?s?{...n,[t.definitionPath]:s}:n:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...s,[r]:n}};return t.target==="jsonSchema7"?i.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(i.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in i||"oneOf"in i||"allOf"in i||"type"in i&&Array.isArray(i.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),i};var ys;(function(a){a.Completable="McpCompletable"})(ys||(ys={}));var ct=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}};ct.create=(a,e)=>new ct({type:a,typeName:ys.Completable,complete:e.complete,...nf(e)});function nf(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,i)=>{var c,u;let{message:h}=a;return o.code==="invalid_enum_value"?{message:h??i.defaultError}:typeof i.data>"u"?{message:(c=h??s)!==null&&c!==void 0?c:i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:(u=h??t)!==null&&u!==void 0?u:i.defaultError}},description:r}}var xa=class a{static isTemplate(e){return/\{[^}\s]+\}/.test(e)}static validateLength(e,t,s){if(e.length>t)throw new Error(`${s} exceeds maximum length of ${t} characters (got ${e.length})`)}get variableNames(){return this.parts.flatMap(e=>typeof e=="string"?[]:e.names)}constructor(e){a.validateLength(e,1e6,"Template"),this.template=e,this.parts=this.parse(e)}toString(){return this.template}parse(e){let t=[],s="",r=0,n=0;for(;r<e.length;)if(e[r]==="{"){s&&(t.push(s),s="");let o=e.indexOf("}",r);if(o===-1)throw new Error("Unclosed template expression");if(n++,n>1e4)throw new Error("Template contains too many expressions (max 10000)");let i=e.slice(r+1,o),c=this.getOperator(i),u=i.includes("*"),h=this.getNames(i),m=h[0];for(let b of h)a.validateLength(b,1e6,"Variable name");t.push({name:m,operator:c,names:h,exploded:u}),r=o+1}else s+=e[r],r++;return s&&t.push(s),t}getOperator(e){return["+","#",".","/","?","&"].find(s=>e.startsWith(s))||""}getNames(e){let t=this.getOperator(e);return e.slice(t.length).split(",").map(s=>s.replace("*","").trim()).filter(s=>s.length>0)}encodeValue(e,t){return a.validateLength(e,1e6,"Variable value"),t==="+"||t==="#"?encodeURI(e):encodeURIComponent(e)}expandPart(e,t){if(e.operator==="?"||e.operator==="&"){let o=e.names.map(c=>{let u=t[c];if(u===void 0)return"";let h=Array.isArray(u)?u.map(m=>this.encodeValue(m,e.operator)).join(","):this.encodeValue(u.toString(),e.operator);return`${c}=${h}`}).filter(c=>c.length>0);return o.length===0?"":(e.operator==="?"?"?":"&")+o.join("&")}if(e.names.length>1){let o=e.names.map(i=>t[i]).filter(i=>i!==void 0);return o.length===0?"":o.map(i=>Array.isArray(i)?i[0]:i).join(",")}let s=t[e.name];if(s===void 0)return"";let n=(Array.isArray(s)?s:[s]).map(o=>this.encodeValue(o,e.operator));switch(e.operator){case"":return n.join(",");case"+":return n.join(",");case"#":return"#"+n.join(",");case".":return"."+n.join(".");case"/":return"/"+n.join("/");default:return n.join(",")}}expand(e){let t="",s=!1;for(let r of this.parts){if(typeof r=="string"){t+=r;continue}let n=this.expandPart(r,e);n&&((r.operator==="?"||r.operator==="&")&&s?t+=n.replace("?","&"):t+=n,(r.operator==="?"||r.operator==="&")&&(s=!0))}return t}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}partToRegExp(e){let t=[];for(let n of e.names)a.validateLength(n,1e6,"Variable name");if(e.operator==="?"||e.operator==="&"){for(let n=0;n<e.names.length;n++){let o=e.names[n],i=n===0?"\\"+e.operator:"&";t.push({pattern:i+this.escapeRegExp(o)+"=([^&]+)",name:o})}return t}let s,r=e.name;switch(e.operator){case"":s=e.exploded?"([^/]+(?:,[^/]+)*)":"([^/,]+)";break;case"+":case"#":s="(.+)";break;case".":s="\\.([^/,]+)";break;case"/":s="/"+(e.exploded?"([^/]+(?:,[^/]+)*)":"([^/,]+)");break;default:s="([^/]+)"}return t.push({pattern:s,name:r}),t}match(e){a.validateLength(e,1e6,"URI");let t="^",s=[];for(let i of this.parts)if(typeof i=="string")t+=this.escapeRegExp(i);else{let c=this.partToRegExp(i);for(let{pattern:u,name:h}of c)t+=u,s.push({name:h,exploded:i.exploded})}t+="$",a.validateLength(t,1e6,"Generated regex pattern");let r=new RegExp(t),n=e.match(r);if(!n)return null;let o={};for(let i=0;i<s.length;i++){let{name:c,exploded:u}=s[i],h=n[i+1],m=c.replace("*","");u&&h.includes(",")?o[m]=h.split(","):o[m]=h}return o}};var Vo=class{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new va(e,t)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(Jt.shape.method.value),this.server.assertCanSetRequestHandler(Kt.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(Jt,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,t])=>{let s={name:e,title:t.title,description:t.description,inputSchema:t.inputSchema?Pa(t.inputSchema,{strictUnions:!0,pipeStrategy:"input"}):of,annotations:t.annotations,_meta:t._meta};return t.outputSchema&&(s.outputSchema=Pa(t.outputSchema,{strictUnions:!0,pipeStrategy:"output"})),s})})),this.server.setRequestHandler(Kt,async(e,t)=>{let s=this._registeredTools[e.params.name];if(!s)throw new fe(de.InvalidParams,`Tool ${e.params.name} not found`);if(!s.enabled)throw new fe(de.InvalidParams,`Tool ${e.params.name} disabled`);let r;if(s.inputSchema){let n=await s.inputSchema.safeParseAsync(e.params.arguments);if(!n.success)throw new fe(de.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${n.error.message}`);let o=n.data,i=s.callback;try{r=await Promise.resolve(i(o,t))}catch(c){r={content:[{type:"text",text:c instanceof Error?c.message:String(c)}],isError:!0}}}else{let n=s.callback;try{r=await Promise.resolve(n(t))}catch(o){r={content:[{type:"text",text:o instanceof Error?o.message:String(o)}],isError:!0}}}if(s.outputSchema&&!r.isError){if(!r.structuredContent)throw new fe(de.InvalidParams,`Tool ${e.params.name} has an output schema but no structured content was provided`);let n=await s.outputSchema.safeParseAsync(r.structuredContent);if(!n.success)throw new fe(de.InvalidParams,`Invalid structured content for tool ${e.params.name}: ${n.error.message}`)}return r}),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(Gt.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(Gt,async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new fe(de.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){let s=this._registeredPrompts[t.name];if(!s)throw new fe(de.InvalidParams,`Prompt ${t.name} not found`);if(!s.enabled)throw new fe(de.InvalidParams,`Prompt ${t.name} disabled`);if(!s.argsSchema)return Ea;let r=s.argsSchema.shape[e.params.argument.name];if(!(r instanceof ct))return Ea;let o=await r._def.complete(e.params.argument.value,e.params.context);return Zo(o)}async handleResourceCompletion(e,t){let s=Object.values(this._registeredResourceTemplates).find(o=>o.resourceTemplate.uriTemplate.toString()===t.uri);if(!s){if(this._registeredResources[t.uri])return Ea;throw new fe(de.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let r=s.resourceTemplate.completeCallback(e.params.argument.name);if(!r)return Ea;let n=await r(e.params.argument.value,e.params.context);return Zo(n)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(Ht.shape.method.value),this.server.assertCanSetRequestHandler(Ut.shape.method.value),this.server.assertCanSetRequestHandler(Zt.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(Ht,async(e,t)=>{let s=Object.entries(this._registeredResources).filter(([n,o])=>o.enabled).map(([n,o])=>({uri:n,name:o.name,...o.metadata})),r=[];for(let n of Object.values(this._registeredResourceTemplates)){if(!n.resourceTemplate.listCallback)continue;let o=await n.resourceTemplate.listCallback(t);for(let i of o.resources)r.push({...n.metadata,...i})}return{resources:[...s,...r]}}),this.server.setRequestHandler(Ut,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([t,s])=>({name:t,uriTemplate:s.resourceTemplate.uriTemplate.toString(),...s.metadata}))})),this.server.setRequestHandler(Zt,async(e,t)=>{let s=new URL(e.params.uri),r=this._registeredResources[s.toString()];if(r){if(!r.enabled)throw new fe(de.InvalidParams,`Resource ${s} disabled`);return r.readCallback(s,t)}for(let n of Object.values(this._registeredResourceTemplates)){let o=n.resourceTemplate.uriTemplate.match(s.toString());if(o)return n.readCallback(s,o,t)}throw new fe(de.InvalidParams,`Resource ${s} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(Bt.shape.method.value),this.server.assertCanSetRequestHandler(Qt.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(Bt,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,t])=>({name:e,title:t.title,description:t.description,arguments:t.argsSchema?cf(t.argsSchema):void 0}))})),this.server.setRequestHandler(Qt,async(e,t)=>{let s=this._registeredPrompts[e.params.name];if(!s)throw new fe(de.InvalidParams,`Prompt ${e.params.name} not found`);if(!s.enabled)throw new fe(de.InvalidParams,`Prompt ${e.params.name} disabled`);if(s.argsSchema){let r=await s.argsSchema.safeParseAsync(e.params.arguments);if(!r.success)throw new fe(de.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${r.error.message}`);let n=r.data,o=s.callback;return await Promise.resolve(o(n,t))}else{let r=s.callback;return await Promise.resolve(r(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...s){let r;typeof s[0]=="object"&&(r=s.shift());let n=s[0];if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let o=this._createRegisteredResource(e,void 0,t,r,n);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let o=this._createRegisteredResourceTemplate(e,void 0,t,r,n);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}}registerResource(e,t,s,r){if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let n=this._createRegisteredResource(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),n}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let n=this._createRegisteredResourceTemplate(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),n}}_createRegisteredResource(e,t,s,r,n){let o={name:e,title:t,metadata:r,readCallback:n,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({uri:null}),update:i=>{typeof i.uri<"u"&&i.uri!==s&&(delete this._registeredResources[s],i.uri&&(this._registeredResources[i.uri]=o)),typeof i.name<"u"&&(o.name=i.name),typeof i.title<"u"&&(o.title=i.title),typeof i.metadata<"u"&&(o.metadata=i.metadata),typeof i.callback<"u"&&(o.readCallback=i.callback),typeof i.enabled<"u"&&(o.enabled=i.enabled),this.sendResourceListChanged()}};return this._registeredResources[s]=o,o}_createRegisteredResourceTemplate(e,t,s,r,n){let o={resourceTemplate:s,title:t,metadata:r,readCallback:n,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:i=>{typeof i.name<"u"&&i.name!==e&&(delete this._registeredResourceTemplates[e],i.name&&(this._registeredResourceTemplates[i.name]=o)),typeof i.title<"u"&&(o.title=i.title),typeof i.template<"u"&&(o.resourceTemplate=i.template),typeof i.metadata<"u"&&(o.metadata=i.metadata),typeof i.callback<"u"&&(o.readCallback=i.callback),typeof i.enabled<"u"&&(o.enabled=i.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=o,o}_createRegisteredPrompt(e,t,s,r,n){let o={title:t,description:s,argsSchema:r===void 0?void 0:l.object(r),callback:n,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:i=>{typeof i.name<"u"&&i.name!==e&&(delete this._registeredPrompts[e],i.name&&(this._registeredPrompts[i.name]=o)),typeof i.title<"u"&&(o.title=i.title),typeof i.description<"u"&&(o.description=i.description),typeof i.argsSchema<"u"&&(o.argsSchema=l.object(i.argsSchema)),typeof i.callback<"u"&&(o.callback=i.callback),typeof i.enabled<"u"&&(o.enabled=i.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=o,o}_createRegisteredTool(e,t,s,r,n,o,i,c){let u={title:t,description:s,inputSchema:r===void 0?void 0:l.object(r),outputSchema:n===void 0?void 0:l.object(n),annotations:o,_meta:i,callback:c,enabled:!0,disable:()=>u.update({enabled:!1}),enable:()=>u.update({enabled:!0}),remove:()=>u.update({name:null}),update:h=>{typeof h.name<"u"&&h.name!==e&&(delete this._registeredTools[e],h.name&&(this._registeredTools[h.name]=u)),typeof h.title<"u"&&(u.title=h.title),typeof h.description<"u"&&(u.description=h.description),typeof h.paramsSchema<"u"&&(u.inputSchema=l.object(h.paramsSchema)),typeof h.callback<"u"&&(u.callback=h.callback),typeof h.annotations<"u"&&(u.annotations=h.annotations),typeof h._meta<"u"&&(u._meta=h._meta),typeof h.enabled<"u"&&(u.enabled=h.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=u,this.setToolRequestHandlers(),this.sendToolListChanged(),u}tool(e,...t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let s,r,n,o;if(typeof t[0]=="string"&&(s=t.shift()),t.length>1){let c=t[0];Uo(c)?(r=t.shift(),t.length>1&&typeof t[0]=="object"&&t[0]!==null&&!Uo(t[0])&&(o=t.shift())):typeof c=="object"&&c!==null&&(o=t.shift())}let i=t[0];return this._createRegisteredTool(e,void 0,s,r,n,o,void 0,i)}registerTool(e,t,s){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:r,description:n,inputSchema:o,outputSchema:i,annotations:c,_meta:u}=t;return this._createRegisteredTool(e,r,n,o,i,c,u,s)}prompt(e,...t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let s;typeof t[0]=="string"&&(s=t.shift());let r;t.length>1&&(r=t.shift());let n=t[0],o=this._createRegisteredPrompt(e,void 0,s,r,n);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),o}registerPrompt(e,t,s){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:r,description:n,argsSchema:o}=t,i=this._createRegisteredPrompt(e,r,n,o,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),i}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(e,t){return this.server.sendLoggingMessage(e,t)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}},Ho=class{constructor(e,t){this._callbacks=t,this._uriTemplate=typeof e=="string"?new xa(e):e}get uriTemplate(){return this._uriTemplate}get listCallback(){return this._callbacks.list}completeCallback(e){var t;return(t=this._callbacks.complete)===null||t===void 0?void 0:t[e]}},of={type:"object",properties:{}};function Uo(a){return typeof a!="object"||a===null?!1:Object.keys(a).length===0||Object.values(a).some(lf)}function lf(a){return a!==null&&typeof a=="object"&&"parse"in a&&typeof a.parse=="function"&&"safeParse"in a&&typeof a.safeParse=="function"}function cf(a){return Object.entries(a.shape).map(([e,t])=>({name:e,description:t.description,required:!t.isOptional()}))}function Zo(a){return{completion:{values:a.slice(0,100),total:a.length,hasMore:a.length>100}}}var Ea={completion:{values:[],hasMore:!1}};export{Vo as McpServer,Ho as ResourceTemplate};
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
